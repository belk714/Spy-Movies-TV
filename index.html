<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üïµÔ∏è Spy Movies & TV Tracker</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{--bg:#0a0a0f;--card:#151520;--card-hover:#1a1a2e;--accent:#e63946;--accent2:#457b9d;--text:#e0e0e0;--text-dim:#888;--gold:#f4a261;--green:#2a9d8f;--border:#252535;--input-bg:#1a1a28;--tag-bg:#252540}
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:var(--bg);color:var(--text);min-height:100vh}
a{color:var(--accent2);text-decoration:none}

/* Header */
.header{background:linear-gradient(135deg,#0d0d1a 0%,#1a1a2e 100%);padding:24px 20px 16px;text-align:center;border-bottom:1px solid var(--border);position:sticky;top:0;z-index:100;backdrop-filter:blur(10px)}
.header h1{font-size:1.8rem;margin-bottom:4px;background:linear-gradient(135deg,var(--accent),var(--gold));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.header p{color:var(--text-dim);font-size:.85rem}
.stats{display:flex;gap:16px;justify-content:center;margin-top:10px;flex-wrap:wrap}
.stat{font-size:.8rem;color:var(--text-dim)}.stat b{color:var(--gold)}

/* Search & Controls */
.controls{max-width:1400px;margin:0 auto;padding:16px 16px 0}
.search-row{display:flex;gap:10px;margin-bottom:12px;flex-wrap:wrap}
.search-row input{flex:1;min-width:200px;padding:10px 14px;background:var(--input-bg);border:1px solid var(--border);border-radius:8px;color:var(--text);font-size:.95rem;outline:none}
.search-row input:focus{border-color:var(--accent2)}
.sort-select{padding:10px 14px;background:var(--input-bg);border:1px solid var(--border);border-radius:8px;color:var(--text);font-size:.85rem;outline:none;cursor:pointer}

/* Filter bar */
.filters{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:16px;align-items:center}
.filter-group{display:flex;gap:4px;flex-wrap:wrap}
.fbtn{padding:6px 14px;border-radius:20px;border:1px solid var(--border);background:var(--input-bg);color:var(--text-dim);font-size:.8rem;cursor:pointer;transition:all .2s;white-space:nowrap}
.fbtn:hover{border-color:var(--accent2);color:var(--text)}
.fbtn.active{background:var(--accent);border-color:var(--accent);color:#fff}
.fbtn.active-alt{background:var(--accent2);border-color:var(--accent2);color:#fff}
.filter-label{font-size:.75rem;color:var(--text-dim);text-transform:uppercase;letter-spacing:.5px;margin-right:4px;align-self:center}
.filter-sep{width:1px;height:24px;background:var(--border);margin:0 4px;align-self:center}

/* Grid */
.grid{max-width:1400px;margin:0 auto;padding:0 16px 80px;display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:16px}
.no-results{grid-column:1/-1;text-align:center;padding:60px 20px;color:var(--text-dim);font-size:1.1rem}

/* Card */
.card{background:var(--card);border-radius:12px;overflow:hidden;border:1px solid var(--border);transition:transform .2s,border-color .2s;cursor:pointer;position:relative}
.card:hover{transform:translateY(-3px);border-color:var(--accent2)}
.card.seen{opacity:.7}.card.seen .seen-badge{display:flex}
.seen-badge{display:none;position:absolute;top:10px;right:10px;background:var(--green);color:#fff;font-size:.7rem;padding:4px 10px;border-radius:12px;font-weight:600;z-index:2;align-items:center;gap:4px}
.card-top{display:flex;gap:12px;padding:12px 12px 0}
.poster{width:100px;min-width:100px;height:150px;border-radius:8px;object-fit:cover;background:var(--input-bg)}
.poster-placeholder{width:100px;min-width:100px;height:150px;border-radius:8px;background:var(--input-bg);display:flex;align-items:center;justify-content:center;font-size:2rem}
.card-info{flex:1;min-width:0}
.card-title{font-size:1rem;font-weight:700;margin-bottom:4px;line-height:1.3}
.card-meta{font-size:.78rem;color:var(--text-dim);margin-bottom:6px;display:flex;flex-wrap:wrap;gap:6px;align-items:center}
.badge{display:inline-block;padding:2px 8px;border-radius:10px;font-size:.7rem;font-weight:600}
.badge-movie{background:#e6394620;color:var(--accent)}
.badge-tv{background:#457b9d20;color:var(--accent2)}
.rating{color:var(--gold);font-weight:700;font-size:.85rem}
.card-overview{font-size:.78rem;color:var(--text-dim);line-height:1.5;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden;margin-top:4px}
.card-bottom{padding:10px 12px;display:flex;gap:6px;flex-wrap:wrap;align-items:center;justify-content:space-between}
.tags{display:flex;gap:4px;flex-wrap:wrap;flex:1}
.tag{font-size:.65rem;padding:3px 8px;background:var(--tag-bg);border-radius:10px;color:var(--text-dim);white-space:nowrap}
.card-actions{display:flex;gap:6px;align-items:center}
.btn-seen{padding:5px 12px;border-radius:16px;border:1px solid var(--border);background:transparent;color:var(--text-dim);font-size:.72rem;cursor:pointer;transition:all .2s;white-space:nowrap}
.btn-seen:hover{border-color:var(--green);color:var(--green)}
.card.seen .btn-seen{background:var(--green);border-color:var(--green);color:#fff}
.btn-link{padding:5px 10px;border-radius:16px;border:1px solid var(--border);background:transparent;color:var(--text-dim);font-size:.72rem;cursor:pointer;text-decoration:none;transition:all .2s}
.btn-link:hover{border-color:var(--accent2);color:var(--accent2)}

/* Modal */
.modal-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,.8);z-index:200;align-items:center;justify-content:center;padding:20px}
.modal-overlay.open{display:flex}
.modal{background:var(--card);border-radius:16px;max-width:600px;width:100%;max-height:90vh;overflow-y:auto;border:1px solid var(--border);position:relative}
.modal-close{position:absolute;top:12px;right:12px;background:none;border:none;color:var(--text);font-size:1.5rem;cursor:pointer;z-index:2;width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:var(--input-bg)}
.modal-poster{width:100%;height:300px;object-fit:cover}
.modal-body{padding:20px}
.modal-body h2{font-size:1.4rem;margin-bottom:8px}
.modal-body .card-meta{margin-bottom:12px}
.modal-body .card-overview{-webkit-line-clamp:unset;font-size:.9rem;line-height:1.7;margin-bottom:16px}
.modal-body .tags{margin-bottom:16px}
.modal-actions{display:flex;gap:10px;flex-wrap:wrap}

/* Mobile */
@media(max-width:600px){
.header h1{font-size:1.4rem}
.grid{grid-template-columns:1fr}
.card-top{padding:10px 10px 0}
.filters{gap:6px}
.fbtn{padding:5px 10px;font-size:.75rem}
}

/* Streaming providers */
.providers{display:flex;align-items:center;gap:6px;padding:4px 12px 0;flex-wrap:wrap;min-height:28px}
.providers.loading{color:var(--text-dim);font-size:.7rem}
.prov-logo{width:24px;height:24px;border-radius:6px;object-fit:cover;title:attr(alt)}
.prov-link{font-size:.65rem;color:var(--accent2);text-decoration:none;margin-left:auto}
.prov-link:hover{text-decoration:underline}
.prov-rent{font-size:.68rem;color:var(--text-dim);display:flex;align-items:center;gap:4px}
.prov-rent .prov-logo{width:20px;height:20px;border-radius:4px}
.modal-providers{margin:12px 0;display:flex;flex-wrap:wrap;gap:8px;align-items:center}
.modal-providers .prov-logo{width:32px;height:32px;border-radius:8px}
.modal-prov-label{font-size:.75rem;color:var(--text-dim);margin-right:4px;width:100%}
.stream-filter{position:relative}
.stream-toggle{padding:6px 14px;border-radius:20px;border:1px solid var(--border);background:var(--input-bg);color:var(--text-dim);font-size:.8rem;cursor:pointer;transition:all .2s;white-space:nowrap}
.stream-toggle:hover{border-color:var(--accent2);color:var(--text)}
.stream-toggle.has-active{background:var(--accent2);border-color:var(--accent2);color:#fff}
.stream-dropdown{display:none;position:absolute;top:100%;left:0;margin-top:6px;background:var(--card);border:1px solid var(--border);border-radius:10px;padding:8px 0;min-width:200px;z-index:50;box-shadow:0 8px 24px rgba(0,0,0,.5)}
.stream-dropdown.open{display:block}
.stream-opt{display:flex;align-items:center;gap:8px;padding:6px 14px;cursor:pointer;font-size:.8rem;color:var(--text-dim);transition:background .15s}
.stream-opt:hover{background:var(--input-bg)}
.stream-opt.checked{color:var(--text)}
.stream-opt .check{width:16px;height:16px;border-radius:4px;border:1px solid var(--border);display:flex;align-items:center;justify-content:center;font-size:.65rem;flex-shrink:0}
.stream-opt.checked .check{background:var(--accent2);border-color:var(--accent2);color:#fff}
.stream-opt img{width:20px;height:20px;border-radius:4px}

/* Scrollbar */
::-webkit-scrollbar{width:6px}
::-webkit-scrollbar-track{background:var(--bg)}
::-webkit-scrollbar-thumb{background:var(--border);border-radius:3px}

/* Seen filter buttons */
.seen-filter .fbtn.active-green{background:var(--green);border-color:var(--green);color:#fff}
</style>
</head>
<body>

<div class="header">
<h1>üïµÔ∏è Spy Movies & TV Tracker</h1>
<p>Track your journey through the world of espionage cinema</p>
<div class="stats">
<span class="stat">üìΩÔ∏è <b id="totalCount">0</b> titles</span>
<span class="stat">‚úÖ <b id="seenCount">0</b> seen</span>
<span class="stat">üìã <b id="unseenCount">0</b> to watch</span>
<span class="stat">‚≠ê <b id="avgRating">0</b> avg rating</span>
<span class="stat" id="syncStatus">‚òÅÔ∏è ‚Äî</span>
</div>
</div>

<div class="controls">
<div class="search-row">
<input type="text" id="search" placeholder="üîç Search titles, actors, directors...">
<select class="sort-select" id="sortBy">
<option value="rating-desc">‚≠ê Rating (High‚ÜíLow)</option>
<option value="rating-asc">‚≠ê Rating (Low‚ÜíHigh)</option>
<option value="year-desc">üìÖ Year (Newest)</option>
<option value="year-asc">üìÖ Year (Oldest)</option>
<option value="title-asc">üî§ Title (A‚ÜíZ)</option>
<option value="title-desc">üî§ Title (Z‚ÜíA)</option>
</select>
</div>
<div class="filters">
<span class="filter-label">Type</span>
<div class="filter-group" id="typeFilter">
<button class="fbtn active" data-val="all">All</button>
<button class="fbtn" data-val="movie">üé¨ Movies</button>
<button class="fbtn" data-val="tv">üì∫ TV</button>
</div>
<div class="filter-sep"></div>
<span class="filter-label">Language</span>
<div class="filter-group" id="langFilter">
<button class="fbtn active" data-val="all">All</button>
<button class="fbtn" data-val="en">English</button>
<button class="fbtn" data-val="intl">International</button>
</div>
<div class="filter-sep"></div>
<span class="filter-label">Decade</span>
<select class="sort-select" id="decadeFilter">
<option value="all">All Decades</option>
<option value="1930">1930s</option>
<option value="1940">1940s</option>
<option value="1950">1950s</option>
<option value="1960">1960s</option>
<option value="1970">1970s</option>
<option value="1980">1980s</option>
<option value="1990">1990s</option>
<option value="2000">2000s</option>
<option value="2010">2010s</option>
<option value="2020">2020s</option>
</select>
<div class="filter-sep"></div>
<span class="filter-label">Min Rating</span>
<div class="filter-group" id="ratingFilter">
<button class="fbtn active" data-val="0">Any</button>
<button class="fbtn" data-val="6">6+</button>
<button class="fbtn" data-val="7">7+</button>
<button class="fbtn" data-val="8">8+</button>
</div>
<div class="filter-sep"></div>
<span class="filter-label">Status</span>
<div class="filter-group seen-filter" id="seenFilter">
<button class="fbtn active" data-val="all">All</button>
<button class="fbtn" data-val="seen">‚úÖ Seen</button>
<button class="fbtn" data-val="unseen">üìã Unseen</button>
</div>
<div class="filter-sep"></div>
<span class="filter-label">Streaming</span>
<div class="stream-filter" id="streamFilter">
<button class="stream-toggle" id="streamToggle">üì∫ Any Platform ‚ñæ</button>
<div class="stream-dropdown" id="streamDropdown"></div>
</div>
</div>
</div>

<div class="grid" id="grid"></div>

<div class="modal-overlay" id="modal">
<div class="modal">
<button class="modal-close" onclick="closeModal()">√ó</button>
<img class="modal-poster" id="modalPoster" src="" alt="">
<div class="modal-body">
<h2 id="modalTitle"></h2>
<div class="card-meta" id="modalMeta"></div>
<p class="card-overview" id="modalOverview"></p>
<div class="tags" id="modalTags"></div>
<div class="modal-actions" id="modalActions"></div>
</div>
</div>
</div>

<script>
const DATA=[
{id:1,title:"Casino Royale",year:2006,type:"movie",lang:"en",rating:8.0,runtime:144,poster:"https://m.media-amazon.com/images/M/MV5BMWQ1ZDM4NDktMWY0NC00MjcxLWJlMDMtNmE2MGVhYzRjMWQ0XkEyXkFqcGc@._V1_SX300.jpg",overview:"Armed with a license to kill, Secret Agent James Bond sets out on his first mission as 007, and must defeat a private banker funding terrorists in a high-stakes game of poker at Casino Royale.",tags:["action","bond","cold-war","thriller"],imdb:"tt0381061",trailer:"https://www.youtube.com/watch?v=U4NT78c-pYs",director:"Martin Campbell",cast:"Daniel Craig, Eva Green",rt:94},
{id:2,title:"Skyfall",year:2012,type:"movie",lang:"en",rating:7.8,runtime:143,poster:"https://m.media-amazon.com/images/M/MV5BNjAzMWNkODUtM2FlMi00NzgyLWJhMGUtMWEyNDYyZGFiN2RlXkEyXkFqcGc@._V1_SX300.jpg",overview:"When Bond's latest assignment goes gravely wrong, agents around the world are exposed and MI6 is attacked, forcing M to relocate the agency. Bond must track down and destroy the threat, no matter how personal the cost.",tags:["action","bond","thriller"],imdb:"tt1074638",trailer:"https://www.youtube.com/watch?v=YvV3g8hLlyU",director:"Sam Mendes",cast:"Daniel Craig, Javier Bardem",rt:92},
{id:3,title:"GoldenEye",year:1995,type:"movie",lang:"en",rating:7.2,runtime:130,poster:"https://m.media-amazon.com/images/M/MV5BOGQxNmYyY2YtZGIyNy00ODgxLThhZWEtZGIyNjJhYzFlOTllXkEyXkFqcGc@._V1_SX300.jpg",overview:"When a deadly satellite weapon is stolen, Bond must outwit a former ally turned villain to prevent a global economic meltdown.",tags:["action","bond","cold-war","thriller"],imdb:"tt0113189",trailer:"https://www.youtube.com/watch?v=-LiwM5nxAZ4",director:"Martin Campbell",cast:"Pierce Brosnan, Sean Bean",rt:80},
{id:4,title:"Goldfinger",year:1964,type:"movie",lang:"en",rating:7.7,runtime:110,poster:"https://m.media-amazon.com/images/M/MV5BMTQ2MzE0OTU3NV5BMl5BanBnXkFtZTcwNjQxNTgzNA@@._V1_SX300.jpg",overview:"Investigating gold smuggler Auric Goldfinger, Bond uncovers a plot to contaminate the Fort Knox gold reserve.",tags:["action","bond","classic","thriller"],imdb:"tt0058150",trailer:"https://www.youtube.com/watch?v=xI4vbUvezLU",director:"Guy Hamilton",cast:"Sean Connery, Gert Fr√∂be",rt:99},
{id:5,title:"From Russia with Love",year:1963,type:"movie",lang:"en",rating:7.4,runtime:115,poster:"https://m.media-amazon.com/images/M/MV5BMWY2MWY2ODAtMTY5Ny00MzA2LWFkMWYtODU2MjE0MmM4ZTQ4XkEyXkFqcGc@._V1_SX300.jpg",overview:"James Bond willingly falls into an assassination plot involving a Russian beauty in order to retrieve a Soviet encryption device.",tags:["action","bond","cold-war","classic"],imdb:"tt0057076",trailer:"https://www.youtube.com/watch?v=t9AeIdMQqR8",director:"Terence Young",cast:"Sean Connery, Daniela Bianchi",rt:97},
{id:6,title:"The Spy Who Loved Me",year:1977,type:"movie",lang:"en",rating:7.1,runtime:125,poster:"https://m.media-amazon.com/images/M/MV5BOGQzNTIyYjAtNjAyNy00OTZhLTg4YmMtNzAyNjdiOTlhZDVlXkEyXkFqcGc@._V1_SX300.jpg",overview:"Bond teams up with a Soviet agent to stop a megalomaniac from triggering nuclear war between East and West.",tags:["action","bond","cold-war","thriller"],imdb:"tt0076752",trailer:"https://www.youtube.com/watch?v=TqhzdF8m6q4",director:"Lewis Gilbert",cast:"Roger Moore, Barbara Bach",rt:82},
{id:7,title:"No Time to Die",year:2021,type:"movie",lang:"en",rating:6.8,runtime:163,poster:"https://m.media-amazon.com/images/M/MV5BZGZiOGZhZDQtZmRkNy00ZmUzLTliMGEtZGU0NjExOGMxZDVkXkEyXkFqcGc@._V1_SX300.jpg",overview:"Bond has left active service. His peace is short-lived when CIA ally Felix Leiter enlists his help in the search for a missing scientist.",tags:["action","bond","thriller"],imdb:"tt2382320",trailer:"https://www.youtube.com/watch?v=N_gD9-Oa0fg",director:"Cary Joji Fukunaga",cast:"Daniel Craig, Rami Malek",rt:83},
{id:8,title:"The Bourne Identity",year:2002,type:"movie",lang:"en",rating:7.9,runtime:119,poster:"https://m.media-amazon.com/images/M/MV5BYTk1ZTcyMWMtMWUxYS00MmEzLTlmODYtOTk1MGRjOTg1ZjlmXkEyXkFqcGc@._V1_SX300.jpg",overview:"A man is picked up by a fishing boat, bullet-riddled and suffering from amnesia, before racing to elude assassins and regain his memory.",tags:["action","thriller","bourne"],imdb:"tt0258463",trailer:"https://www.youtube.com/watch?v=PGKK5wACwrU",director:"Doug Liman",cast:"Matt Damon, Franka Potente",rt:84},
{id:9,title:"The Bourne Supremacy",year:2004,type:"movie",lang:"en",rating:7.7,runtime:108,poster:"https://m.media-amazon.com/images/M/MV5BZTU4ZDgyYjgtODA0Mi00MmE3LTgzYWQtZjc1YTFiMTczZTQ3XkEyXkFqcGc@._V1_SX300.jpg",overview:"When Jason Bourne is framed for a CIA operation gone awry, he is forced to resume his former life as a trained assassin to survive.",tags:["action","thriller","bourne"],imdb:"tt0372183",trailer:"https://www.youtube.com/watch?v=zsrdBGr8NIk",director:"Paul Greengrass",cast:"Matt Damon, Joan Allen",rt:81},
{id:10,title:"The Bourne Ultimatum",year:2007,type:"movie",lang:"en",rating:8.0,runtime:115,poster:"https://m.media-amazon.com/images/M/MV5BYzE3ZGM4MzctZjU5MC00NWE2LTg5ZjYtMDFiM2ZlMWQ1MjkwXkEyXkFqcGc@._V1_SX300.jpg",overview:"Bourne dodges a ruthless CIA official and his agents from a new assassination program while searching for the origins of his life as a trained killer.",tags:["action","thriller","bourne"],imdb:"tt0440963",trailer:"https://www.youtube.com/watch?v=ohkW_xbPl9A",director:"Paul Greengrass",cast:"Matt Damon, Julia Stiles",rt:92},
{id:11,title:"Tinker Tailor Soldier Spy",year:2011,type:"movie",lang:"en",rating:7.1,runtime:127,poster:"https://m.media-amazon.com/images/M/MV5BMTU2OTkwNzMyM15BMl5BanBnXkFtZTcwOTI4ODg2Ng@@._V1_SX300.jpg",overview:"In the bleak days of the Cold War, espionage veteran George Smiley is forced from semi-retirement to uncover a Soviet agent within MI6.",tags:["cold-war","thriller","drama","le-carre"],imdb:"tt1340800",trailer:"https://www.youtube.com/watch?v=VW-F1H-Nonk",director:"Tomas Alfredson",cast:"Gary Oldman, Colin Firth",rt:84},
{id:12,title:"The Spy Who Came in from the Cold",year:1965,type:"movie",lang:"en",rating:7.6,runtime:112,poster:"https://m.media-amazon.com/images/M/MV5BNjVmYTMxZWItMzM3OS00N2I5LTkyOTUtNWZiZjNmOTVhYmNhXkEyXkFqcGc@._V1_SX300.jpg",overview:"British agent Alec Leamas is tired of the Cold War and wants to come in from the cold, but is talked into one final dangerous mission.",tags:["cold-war","drama","classic","le-carre"],imdb:"tt0059749",trailer:"https://www.youtube.com/watch?v=52_3k1R3O9Q",director:"Martin Ritt",cast:"Richard Burton, Claire Bloom",rt:86},
{id:13,title:"Bridge of Spies",year:2015,type:"movie",lang:"en",rating:7.6,runtime:141,poster:"https://m.media-amazon.com/images/M/MV5BMjIxOTI0MjU5NV5BMl5BanBnXkFtZTgwNzM4OTk4NTE@._V1_SX300.jpg",overview:"During the Cold War, an American lawyer is recruited to defend an arrested Soviet spy in court, then help the CIA facilitate an exchange of the spy for a captured American U-2 pilot.",tags:["cold-war","drama","thriller","true-story"],imdb:"tt3682448",trailer:"https://www.youtube.com/watch?v=owhBnicLZt4",director:"Steven Spielberg",cast:"Tom Hanks, Mark Rylance",rt:91},
{id:14,title:"Munich",year:2005,type:"movie",lang:"en",rating:7.5,runtime:164,poster:"https://m.media-amazon.com/images/M/MV5BMTcwNzYzMzMwMF5BMl5BanBnXkFtZTcwMzMzODczMQ@@._V1_SX300.jpg",overview:"After the 1972 Munich Olympics massacre, a secret Israeli squad is assigned to track down and assassinate the 11 Palestinians responsible.",tags:["thriller","drama","true-story","mossad"],imdb:"tt0408306",trailer:"https://www.youtube.com/watch?v=kuehOfHwnYY",director:"Steven Spielberg",cast:"Eric Bana, Daniel Craig",rt:79},
{id:15,title:"Mission: Impossible",year:1996,type:"movie",lang:"en",rating:7.1,runtime:110,poster:"https://m.media-amazon.com/images/M/MV5BOGZjNDlkMTYtMTJkZi00OTkzLWI4NDEtYTA2ODQyMjcwYTdlXkEyXkFqcGc@._V1_SX300.jpg",overview:"An American agent, framed for the deaths of his espionage team, goes on the run and discovers the existence of a mole within the CIA.",tags:["action","thriller","mission-impossible"],imdb:"tt0117060",trailer:"https://www.youtube.com/watch?v=L8Pbjh4EZRk",director:"Brian De Palma",cast:"Tom Cruise, Jon Voight",rt:67},
{id:16,title:"Mission: Impossible ‚Äì Fallout",year:2018,type:"movie",lang:"en",rating:7.7,runtime:147,poster:"https://m.media-amazon.com/images/M/MV5BZmUwZTg2YmMtMmZjOS00ZDYwLWI2ZDgtZDcyY2ZmMWMwZDdlXkEyXkFqcGc@._V1_SX300.jpg",overview:"Ethan Hunt and his IMF team race against time after a mission gone wrong to prevent a nuclear catastrophe.",tags:["action","thriller","mission-impossible"],imdb:"tt4912910",trailer:"https://www.youtube.com/watch?v=MEOOas3JZt0",director:"Christopher McQuarrie",cast:"Tom Cruise, Henry Cavill",rt:98},
{id:17,title:"Mission: Impossible ‚Äì Rogue Nation",year:2015,type:"movie",lang:"en",rating:7.4,runtime:131,poster:"https://m.media-amazon.com/images/M/MV5BZjUwZjg2ZjAtY2RhZi00YmZjLTlhNGQtOWQwNDk1MjhhM2NhXkEyXkFqcGc@._V1_SX300.jpg",overview:"Ethan and his team take on their most impossible mission yet‚Äîeradicating the Syndicate, a dangerous rogue network of trained operatives.",tags:["action","thriller","mission-impossible"],imdb:"tt2381249",trailer:"https://www.youtube.com/watch?v=F-qBD17wwrQ",director:"Christopher McQuarrie",cast:"Tom Cruise, Rebecca Ferguson",rt:94},
{id:18,title:"Atomic Blonde",year:2017,type:"movie",lang:"en",rating:6.7,runtime:115,poster:"https://m.media-amazon.com/images/M/MV5BMjM5NDYzMzg5N15BMl5BanBnXkFtZTgwOTM2NDU1MjI@._V1_SX300.jpg",overview:"An undercover MI6 agent is sent to Berlin during the Cold War to investigate the murder of a fellow agent and recover a missing list of double agents.",tags:["action","cold-war","thriller"],imdb:"tt2406566",trailer:"https://www.youtube.com/watch?v=yIUube1pSC0",director:"David Leitch",cast:"Charlize Theron, James McAvoy",rt:79},
{id:19,title:"Spy Game",year:2001,type:"movie",lang:"en",rating:7.0,runtime:126,poster:"https://m.media-amazon.com/images/M/MV5BYTljZmI1MjctMWJmMC00ZjJmLTkwNzUtNGQxNWJhZGRjMjM3XkEyXkFqcGc@._V1_SX300.jpg",overview:"Retiring CIA officer Nathan Muir recalls his training of Tom Bishop while working against the clock to save him from a Chinese prison.",tags:["thriller","drama","cold-war"],imdb:"tt0266987",trailer:"https://www.youtube.com/watch?v=S7m6SWDODMA",director:"Tony Scott",cast:"Robert Redford, Brad Pitt",rt:64},
{id:20,title:"Three Days of the Condor",year:1975,type:"movie",lang:"en",rating:7.4,runtime:117,poster:"https://m.media-amazon.com/images/M/MV5BYjQ1NjlkZTMtNTkyZS00YmY3LWJmMzctMTgxNmE4NTFkNDViXkEyXkFqcGc@._V1_SX300.jpg",overview:"A bookish CIA researcher finds all his co-workers dead and must outwit those responsible until he figures out who he can trust.",tags:["thriller","cold-war","classic"],imdb:"tt0073802",trailer:"https://www.youtube.com/watch?v=mU8tQTNlPAM",director:"Sydney Pollack",cast:"Robert Redford, Faye Dunaway",rt:87},
{id:21,title:"The Manchurian Candidate",year:1962,type:"movie",lang:"en",rating:7.9,runtime:126,poster:"https://m.media-amazon.com/images/M/MV5BMTg2NTM1ZDktNTM4My00NzM0LWE3ZjctMTUyZTk0N2EwMGNjXkEyXkFqcGc@._V1_SX300.jpg",overview:"A former prisoner of war is brainwashed as an unwitting assassin for a Communist conspiracy.",tags:["cold-war","thriller","classic","drama"],imdb:"tt0056218",trailer:"https://www.youtube.com/watch?v=tgCyowLRfvA",director:"John Frankenheimer",cast:"Frank Sinatra, Laurence Harvey",rt:97},
{id:22,title:"North by Northwest",year:1959,type:"movie",lang:"en",rating:8.3,runtime:136,poster:"https://m.media-amazon.com/images/M/MV5BZWIzODI2OGItMzM0Ny00OGRmLTlkNmItMDQxMTFmMTk3YmQwXkEyXkFqcGc@._V1_SX300.jpg",overview:"A hapless New York advertising executive is mistaken for a government agent by a group of foreign spies, and is pursued across the country.",tags:["thriller","classic","hitchcock"],imdb:"tt0053125",trailer:"https://www.youtube.com/watch?v=cPNiwc3ogIo",director:"Alfred Hitchcock",cast:"Cary Grant, Eva Marie Saint",rt:97},
{id:23,title:"The 39 Steps",year:1935,type:"movie",lang:"en",rating:7.6,runtime:86,poster:"https://m.media-amazon.com/images/M/MV5BMTY5ODAzMTcwOF5BMl5BanBnXkFtZTcwMzYxNDYyNA@@._V1_SX300.jpg",overview:"A man in London tries to help a counter-espionage agent, but then finds himself on the run across Scotland when the agent is killed.",tags:["thriller","classic","hitchcock"],imdb:"tt0026029",trailer:"https://www.youtube.com/watch?v=EjPwRiJ1Yxw",director:"Alfred Hitchcock",cast:"Robert Donat, Madeleine Carroll",rt:96},
{id:24,title:"Notorious",year:1946,type:"movie",lang:"en",rating:7.9,runtime:102,poster:"https://m.media-amazon.com/images/M/MV5BOGU5ZjdmNzUtMGY0Ny00NjMyLWJiMDEtMmMzYmMyOTNjNzlmXkEyXkFqcGc@._V1_SX300.jpg",overview:"A woman is asked to spy on a group of her father's Nazi friends in South America. How far will she have to go to get their confidence?",tags:["thriller","classic","hitchcock","romance"],imdb:"tt0038787",trailer:"https://www.youtube.com/watch?v=H8f4UOtLf5Q",director:"Alfred Hitchcock",cast:"Cary Grant, Ingrid Bergman",rt:96},
{id:25,title:"Argo",year:2012,type:"movie",lang:"en",rating:7.7,runtime:120,poster:"https://m.media-amazon.com/images/M/MV5BM2QyMGUyZTEtMjE4Yi00M2RiLTgwN2QtZDMxZDNiMTFkMTFjXkEyXkFqcGc@._V1_SX300.jpg",overview:"Acting under the cover of a Hollywood producer scouting a location for a science fiction film, a CIA agent launches a dangerous operation to rescue six Americans from Tehran during the 1979 Iran hostage crisis.",tags:["thriller","drama","true-story","cia"],imdb:"tt1024648",trailer:"https://www.youtube.com/watch?v=3RrtxIci4T0",director:"Ben Affleck",cast:"Ben Affleck, Bryan Cranston",rt:96},
{id:26,title:"Zero Dark Thirty",year:2012,type:"movie",lang:"en",rating:7.4,runtime:157,poster:"https://m.media-amazon.com/images/M/MV5BMTQ4OTUyNzcwN15BMl5BanBnXkFtZTcwMTQ1NDE3OA@@._V1_SX300.jpg",overview:"A chronicle of the decade-long hunt for al-Qaeda terrorist leader Osama bin Laden after the 2001 September 11 attacks.",tags:["thriller","drama","true-story","cia"],imdb:"tt1790885",trailer:"https://www.youtube.com/watch?v=k7R2uVZYebE",director:"Kathryn Bigelow",cast:"Jessica Chastain, Joel Edgerton",rt:91},
{id:27,title:"The Conversation",year:1974,type:"movie",lang:"en",rating:7.8,runtime:113,poster:"https://m.media-amazon.com/images/M/MV5BOTY4OTVmMzgtNTBkYi00NjI1LWIzOWItNGIwNTM1ZTEzMzc5XkEyXkFqcGc@._V1_SX300.jpg",overview:"A paranoid, secretive surveillance expert has a crisis of conscience when he suspects that the couple he is spying on will be murdered.",tags:["thriller","drama","classic","surveillance"],imdb:"tt0071360",trailer:"https://www.youtube.com/watch?v=mDgKPQWyjRk",director:"Francis Ford Coppola",cast:"Gene Hackman, John Cazale",rt:94},
{id:28,title:"The Ipcress File",year:1965,type:"movie",lang:"en",rating:7.2,runtime:109,poster:"https://m.media-amazon.com/images/M/MV5BMDU0OWI4ZDEtNzZjOS00ZmEzLTllOWYtZjUwNmMxOTMzN2UxXkEyXkFqcGc@._V1_SX300.jpg",overview:"After a prominent scientist is kidnapped, Harry Palmer, an insubordinate British spy, is tasked with tracking him down.",tags:["cold-war","thriller","classic","british"],imdb:"tt0059319",trailer:"https://www.youtube.com/watch?v=EHbvZ1FBqjI",director:"Sidney J. Furie",cast:"Michael Caine, Nigel Green",rt:97},
{id:29,title:"The Constant Gardener",year:2005,type:"movie",lang:"en",rating:7.4,runtime:129,poster:"https://m.media-amazon.com/images/M/MV5BOTU3OWMzMzgtMjYwMi00ZGIyLTk0YTctNDVkYzRmMTM5ZjlmXkEyXkFqcGc@._V1_SX300.jpg",overview:"A widower is determined to get to the bottom of a potentially explosive secret involving his wife's murder and her activist work.",tags:["thriller","drama","le-carre"],imdb:"tt0387131",trailer:"https://www.youtube.com/watch?v=9FycLyDTCWQ",director:"Fernando Meirelles",cast:"Ralph Fiennes, Rachel Weisz",rt:83},
{id:30,title:"The Lives of Others",year:2006,type:"movie",lang:"de",rating:8.4,runtime:137,poster:"https://m.media-amazon.com/images/M/MV5BYjM1N2Q0YWEtN2E5MC00NDM3LTk2NTEtMTc1NTk5OTA5ZGIzXkEyXkFqcGc@._V1_SX300.jpg",overview:"In 1984 East Berlin, a Stasi officer begins to question his loyalty to the party when he is ordered to surveil a playwright and his lover.",tags:["cold-war","drama","surveillance","german"],imdb:"tt0405094",trailer:"https://www.youtube.com/watch?v=n3_iLOp6IhM",director:"Florian Henckel von Donnersmarck",cast:"Ulrich M√ºhe, Sebastian Koch",rt:92},
{id:31,title:"The Americans",year:2013,type:"tv",lang:"en",rating:8.4,runtime:45,poster:"https://m.media-amazon.com/images/M/MV5BMjIzNTEzMDY3OF5BMl5BanBnXkFtZTcwMzI5NDI5OA@@._V1_SX300.jpg",overview:"Two Soviet KGB officers pose as an idealistic American married couple in the suburbs of Washington D.C. during the Reagan era.",tags:["cold-war","drama","thriller","kgb"],imdb:"tt2149175",trailer:"https://www.youtube.com/watch?v=wt7NPuabEgQ",director:"Joe Weisberg",cast:"Keri Russell, Matthew Rhys",rt:null},
{id:32,title:"Homeland",year:2011,type:"tv",lang:"en",rating:8.3,runtime:55,poster:"https://m.media-amazon.com/images/M/MV5BMjAwNTRmODktZDk5Ny00ZjMwLWFhMDUtOTdlOWNhNDMyZmNkXkEyXkFqcGc@._V1_SX300.jpg",overview:"A bipolar CIA operative becomes convinced a prisoner of war has been turned by al-Qaeda and is planning to carry out a terrorist attack on American soil.",tags:["thriller","drama","cia","terrorism"],imdb:"tt1796960",trailer:"https://www.youtube.com/watch?v=KyFmS3wRPCQ",director:"Howard Gordon",cast:"Claire Danes, Damian Lewis",rt:null},
{id:33,title:"Le Bureau des L√©gendes",year:2015,type:"tv",lang:"fr",rating:8.6,runtime:52,poster:"https://m.media-amazon.com/images/M/MV5BZDk2NDA3MzktNTQyOS00YjY0LWI2ZDgtMWI2MTQ5N2Q1Njg0XkEyXkFqcGc@._V1_SX300.jpg",overview:"French intelligence officers working in the DGSE navigate the dangerous world of international espionage with deep-cover agents around the world.",tags:["thriller","drama","french","undercover"],imdb:"tt4063800",trailer:"https://www.youtube.com/watch?v=DceoS_1QfuM",director:"√âric Rochant",cast:"Mathieu Kassovitz, Sara Giraudeau",rt:null},
{id:34,title:"The Night Manager",year:2016,type:"tv",lang:"en",rating:8.1,runtime:58,poster:"https://m.media-amazon.com/images/M/MV5BODA1NDA1ODUtNGM0Ny00NWZkLTlhZmYtMzQ3NDk2OWZjNjMzXkEyXkFqcGc@._V1_SX300.jpg",overview:"A former British soldier is recruited by intelligence operative to infiltrate the inner circle of an international arms dealer.",tags:["thriller","drama","le-carre","british"],imdb:"tt1399664",trailer:"https://www.youtube.com/watch?v=ZoJ3lu03jug",director:"Susanne Bier",cast:"Tom Hiddleston, Hugh Laurie",rt:null},
{id:35,title:"Slow Horses",year:2022,type:"tv",lang:"en",rating:8.1,runtime:45,poster:"https://m.media-amazon.com/images/M/MV5BY2NkNTBiYWUtMGFiZS00MGI4LWE3YjMtZTU3NzhhZmEyYzlkXkEyXkFqcGc@._V1_SX300.jpg",overview:"Follows a team of British intelligence agents who serve in a dumping ground department of MI5 known unaffectionately as Slough House.",tags:["thriller","drama","british","comedy"],imdb:"tt5875444",trailer:"https://www.youtube.com/watch?v=O9ZJChzPn0U",director:"Mick Herron",cast:"Gary Oldman, Kristin Scott Thomas",rt:null},
{id:36,title:"Killing Eve",year:2018,type:"tv",lang:"en",rating:8.2,runtime:42,poster:"https://m.media-amazon.com/images/M/MV5BOWY4NDE3MmQtN2I3OC00NDRjLTk3OWYtNTk5MjhlMDQ0MzU3XkEyXkFqcGc@._V1_SX300.jpg",overview:"A bored MI5 security officer begins to track down a psychopathic assassin, and the two develop a mutual obsession.",tags:["thriller","action","british","cat-and-mouse"],imdb:"tt7016936",trailer:"https://www.youtube.com/watch?v=krXMki0jvcw",director:"Phoebe Waller-Bridge",cast:"Sandra Oh, Jodie Comer",rt:null},
{id:37,title:"24",year:2001,type:"tv",lang:"en",rating:8.4,runtime:44,poster:"https://m.media-amazon.com/images/M/MV5BMTg5OTkyNzA0NF5BMl5BanBnXkFtZTcwMDYyMDUwMg@@._V1_SX300.jpg",overview:"Jack Bauer, Director of Field Ops for the Counter-Terrorist Unit of Los Angeles, races against the clock to subvert terrorist plots.",tags:["action","thriller","terrorism","cia"],imdb:"tt0285331",trailer:"https://www.youtube.com/watch?v=kyWafhzs6zw",director:"Joel Surnow",cast:"Kiefer Sutherland, Mary Lynn Rajskub",rt:null},
{id:38,title:"Alias",year:2001,type:"tv",lang:"en",rating:7.7,runtime:42,poster:"https://m.media-amazon.com/images/M/MV5BNWE1OTkzNTItNWY2Yy00MjY5LWI2ZDktOWQ4YjE5MWJmNzEyXkEyXkFqcGc@._V1_SX300.jpg",overview:"Sydney Bristow discovers she's been working for a criminal organization masquerading as a CIA black-ops division and becomes a double agent.",tags:["action","thriller","drama","sci-fi"],imdb:"tt0285333",trailer:"https://www.youtube.com/watch?v=aDxl2OIivSI",director:"J.J. Abrams",cast:"Jennifer Garner, Victor Garber",rt:null},
{id:39,title:"Spooks",year:2002,type:"tv",lang:"en",rating:8.3,runtime:60,poster:"https://m.media-amazon.com/images/M/MV5BN2FmOTMyMmQtYTY0Zi00MTQyLWFhMzYtMzRiMDYxODEzZGI3XkEyXkFqcGc@._V1_SX300.jpg",overview:"The daily activities of a group of officers at the British Security Service's counter-terrorism division, MI5.",tags:["thriller","drama","british","terrorism"],imdb:"tt0160904",trailer:"https://www.youtube.com/watch?v=v8q-F-mGxY4",director:"David Wolstencroft",cast:"Peter Firth, Keeley Hawes",rt:null},
{id:40,title:"The Prisoner",year:1967,type:"tv",lang:"en",rating:8.4,runtime:50,poster:"https://m.media-amazon.com/images/M/MV5BNjczZmJhNzgtNTk1Yy00YjFlLThjNmMtNmE5MTBhZWFjNDk3XkEyXkFqcGc@._V1_SX300.jpg",overview:"After resigning, a secret agent is abducted and taken to a mysterious village where he is known only as Number Six.",tags:["thriller","classic","sci-fi","british","psychological"],imdb:"tt0061287",trailer:"https://www.youtube.com/watch?v=EhveNJZnfx4",director:"Patrick McGoohan",cast:"Patrick McGoohan, Angelo Muscat",rt:null},
{id:41,title:"Kingsman: The Secret Service",year:2014,type:"movie",lang:"en",rating:7.7,runtime:129,poster:"https://m.media-amazon.com/images/M/MV5BODk1MTYwNTAtYmI5Zi00OWYyLWE0MzQtOWE4NDIxZmU2MjMwXkEyXkFqcGc@._V1_SX300.jpg",overview:"A spy organization recruits an unrefined but promising street kid into the agency's training program, while a global threat emerges from a tech genius.",tags:["action","comedy","british"],imdb:"tt2802144",trailer:"https://www.youtube.com/watch?v=Th_KrhqmHk8",director:"Matthew Vaughn",cast:"Colin Firth, Taron Egerton",rt:75},
{id:42,title:"Austin Powers: International Man of Mystery",year:1997,type:"movie",lang:"en",rating:7.0,runtime:89,poster:"https://m.media-amazon.com/images/M/MV5BODQzM2UwODQtMzg1ZC00MTk4LTlkOTEtYzU4NDFhYmM1MWJkXkEyXkFqcGc@._V1_SX300.jpg",overview:"A 1960s hipster secret agent is cryogenically frozen and reawakened in the 1990s to battle his nemesis Dr. Evil.",tags:["comedy","action","parody"],imdb:"tt0118655",trailer:"https://www.youtube.com/watch?v=9HGy-c4_xFg",director:"Jay Roach",cast:"Mike Myers, Elizabeth Hurley",rt:73},
{id:43,title:"The Man from U.N.C.L.E.",year:2015,type:"movie",lang:"en",rating:7.3,runtime:116,poster:"https://m.media-amazon.com/images/M/MV5BMDFjN2NlOGItYjZiZi00OThhLTlhYWUtYjgyNWFjMWJlNGU4XkEyXkFqcGc@._V1_SX300.jpg",overview:"In the early 1960s, CIA agent Napoleon Solo and KGB operative Illya Kuryakin participate in a joint mission against a mysterious criminal organization.",tags:["action","cold-war","comedy","thriller"],imdb:"tt1638355",trailer:"https://www.youtube.com/watch?v=w_Ky4KPzKwY",director:"Guy Ritchie",cast:"Henry Cavill, Armie Hammer",rt:68},
{id:44,title:"Red Sparrow",year:2018,type:"movie",lang:"en",rating:6.6,runtime:140,poster:"https://m.media-amazon.com/images/M/MV5BMTA3MDkxOTc4NDdeQTJeQWpwZ15BbWU4MDAxNzgyNTQz._V1_SX300.jpg",overview:"A young Russian intelligence officer is assigned to seduce a CIA agent, but she proves to be more than anyone expected.",tags:["thriller","drama","russian"],imdb:"tt2873282",trailer:"https://www.youtube.com/watch?v=PmUL6wMpMWw",director:"Francis Lawrence",cast:"Jennifer Lawrence, Joel Edgerton",rt:45},
{id:45,title:"Salt",year:2010,type:"movie",lang:"en",rating:6.4,runtime:100,poster:"https://m.media-amazon.com/images/M/MV5BMjIyODA2NDg4NV5BMl5BanBnXkFtZTcwMjg4NDAwMw@@._V1_SX300.jpg",overview:"A CIA agent goes on the run after a defector accuses her of being a Russian sleeper agent.",tags:["action","thriller"],imdb:"tt0944835",trailer:"https://www.youtube.com/watch?v=LbkQTB-OJsk",director:"Phillip Noyce",cast:"Angelina Jolie, Liev Schreiber",rt:62},
{id:46,title:"Sicario",year:2015,type:"movie",lang:"en",rating:7.6,runtime:121,poster:"https://m.media-amazon.com/images/M/MV5BMjA5NjM3NTk1M15BMl5BanBnXkFtZTgwMzg1MzU2NjE@._V1_SX300.jpg",overview:"An idealistic FBI agent is enlisted by a government task force to aid in the escalating war against drugs at the border area between the U.S. and Mexico.",tags:["thriller","action","crime"],imdb:"tt3397884",trailer:"https://www.youtube.com/watch?v=Yfhu5JIxnZc",director:"Denis Villeneuve",cast:"Emily Blunt, Benicio del Toro",rt:91},
{id:47,title:"Body of Lies",year:2008,type:"movie",lang:"en",rating:7.0,runtime:128,poster:"https://m.media-amazon.com/images/M/MV5BMTgzOTY3MTM0OV5BMl5BanBnXkFtZTcwNjc5MTI5MQ@@._V1_SX300.jpg",overview:"A CIA operative working in the Middle East navigates deception and danger with his handler back in Washington.",tags:["thriller","action","cia","terrorism"],imdb:"tt0758774",trailer:"https://www.youtube.com/watch?v=1ejuhWeqaZA",director:"Ridley Scott",cast:"Leonardo DiCaprio, Russell Crowe",rt:55},
{id:48,title:"Syriana",year:2005,type:"movie",lang:"en",rating:6.9,runtime:128,poster:"https://m.media-amazon.com/images/M/MV5BYWQ0YmNiYjUtODg0NS00YjNkLWJhOTktOGMxNTdmYTM0ZmMzXkEyXkFqcGc@._V1_SX300.jpg",overview:"A politically charged epic about the state of the oil industry in the hands of those who broker power through it.",tags:["thriller","drama","political","cia"],imdb:"tt0365737",trailer:"https://www.youtube.com/watch?v=FmMKoLho9fg",director:"Stephen Gaghan",cast:"George Clooney, Matt Damon",rt:73},
{id:49,title:"A Most Wanted Man",year:2014,type:"movie",lang:"en",rating:6.8,runtime:122,poster:"https://m.media-amazon.com/images/M/MV5BODY2MTA0MjYzMl5BMl5BanBnXkFtZTgwOTE3NzE4MTE@._V1_SX300.jpg",overview:"A Chechen-Russian immigrant enters Hamburg's Islamic community on a mission to claim his dead father's fortune, drawing the attention of German and American intelligence agencies.",tags:["thriller","drama","le-carre","german"],imdb:"tt1972571",trailer:"https://www.youtube.com/watch?v=x_brlcjskE0",director:"Anton Corbijn",cast:"Philip Seymour Hoffman, Rachel McAdams",rt:86},
{id:50,title:"The Good Shepherd",year:2006,type:"movie",lang:"en",rating:6.7,runtime:167,poster:"https://m.media-amazon.com/images/M/MV5BMTU5MjExMzA1Nl5BMl5BanBnXkFtZTgwMzIxNzQxMTE@._V1_SX300.jpg",overview:"The tumultuous early history of the CIA is viewed through the prism of one man's life.",tags:["thriller","drama","cia","cold-war"],imdb:"tt0343737",trailer:"https://www.youtube.com/watch?v=MKStOxOrxiE",director:"Robert De Niro",cast:"Matt Damon, Angelina Jolie",rt:56},
{id:51,title:"The Departed",year:2006,type:"movie",lang:"en",rating:8.5,runtime:151,poster:"https://m.media-amazon.com/images/M/MV5BMTI1MTY2OTIxNV5BMl5BanBnXkFtZTYwNjQ4NjY3._V1_SX300.jpg",overview:"An undercover cop and a mole in the police attempt to identify each other while infiltrating an Irish gang in South Boston.",tags:["thriller","crime","drama","undercover"],imdb:"tt0407887",trailer:"https://www.youtube.com/watch?v=r-MiSNsCdQ4",director:"Martin Scorsese",cast:"Leonardo DiCaprio, Matt Damon, Jack Nicholson",rt:91},
{id:52,title:"The Third Man",year:1949,type:"movie",lang:"en",rating:8.1,runtime:93,poster:"https://m.media-amazon.com/images/M/MV5BNGVjMTMxZTQtMmVlNy00YmI0LWJjMDUtYTgyZWU1Njg5ZGRiXkEyXkFqcGc@._V1_SX300.jpg",overview:"Pulp novelist Holly Martins travels to shadowy, postwar Vienna, only to find himself investigating the death of an old friend, Harry Lime.",tags:["thriller","classic","noir","cold-war"],imdb:"tt0041959",trailer:"https://www.youtube.com/watch?v=Y7nwySBGqCo",director:"Carol Reed",cast:"Orson Welles, Joseph Cotten",rt:99},
{id:53,title:"The Hunt for Red October",year:1990,type:"movie",lang:"en",rating:7.5,runtime:135,poster:"https://m.media-amazon.com/images/M/MV5BMmNhYWJmN2EtZDYwNC00NzE0LWE5N2UtZTUyMDM4YjZmYWE3XkEyXkFqcGc@._V1_SX300.jpg",overview:"A new, technologically-superior Soviet nuclear submarine heads for the U.S. coast, and only one American knows the truth: its commander plans to defect.",tags:["thriller","cold-war","action","naval"],imdb:"tt0099810",trailer:"https://www.youtube.com/watch?v=NSiAsQMBSRA",director:"John McTiernan",cast:"Sean Connery, Alec Baldwin",rt:88},
{id:54,title:"Enemy of the State",year:1998,type:"movie",lang:"en",rating:7.3,runtime:132,poster:"https://m.media-amazon.com/images/M/MV5BOWVhZmRiODktNzM0Zi00YmVlLWI3MGQtY2M0NmYzN2Q4Yzg4XkEyXkFqcGc@._V1_SX300.jpg",overview:"A lawyer becomes a target by a corrupt politician and his NSA goons when he accidentally receives key evidence to a political murder.",tags:["thriller","action","surveillance","nsa"],imdb:"tt0120660",trailer:"https://www.youtube.com/watch?v=a3mrRv-1khI",director:"Tony Scott",cast:"Will Smith, Gene Hackman",rt:71},
{id:55,title:"Hanna",year:2011,type:"movie",lang:"en",rating:6.8,runtime:111,poster:"https://m.media-amazon.com/images/M/MV5BNTAzMTg1NjY0NF5BMl5BanBnXkFtZTcwODc3MTgzNA@@._V1_SX300.jpg",overview:"A 16-year-old girl raised by her father to be the perfect assassin is dispatched on a mission across Europe, tracked by a ruthless intelligence operative.",tags:["action","thriller","drama"],imdb:"tt0993842",trailer:"https://www.youtube.com/watch?v=Tjtv8tVtVRw",director:"Joe Wright",cast:"Saoirse Ronan, Cate Blanchett",rt:71},
{id:56,title:"The Tailor of Panama",year:2001,type:"movie",lang:"en",rating:6.1,runtime:109,poster:"https://m.media-amazon.com/images/M/MV5BMTY2ODcxMDAyMV5BMl5BanBnXkFtZTYwNTEzNjc2._V1_SX300.jpg",overview:"A British spy enlists an impoverished local tailor to provide intelligence on the political situation in Panama.",tags:["thriller","drama","le-carre","comedy"],imdb:"tt0236784",trailer:"https://www.youtube.com/watch?v=if887QzvTiw",director:"John Boorman",cast:"Pierce Brosnan, Geoffrey Rush",rt:75},
{id:57,title:"Ronin",year:1998,type:"movie",lang:"en",rating:7.3,runtime:122,poster:"https://m.media-amazon.com/images/M/MV5BYzU0MDEwOGMtZWFlMy00ZjllLWFmMWQtYWIxN2M1YmU5ZWQwXkEyXkFqcGc@._V1_SX300.jpg",overview:"A freelancing former US intelligence agent tries to track down a mysterious package that is wanted by both the Irish and the Russians.",tags:["action","thriller","cold-war"],imdb:"tt0122690",trailer:"https://www.youtube.com/watch?v=FHrhOuz_QEk",director:"John Frankenheimer",cast:"Robert De Niro, Jean Reno",rt:69},
{id:58,title:"Charlie Wilson's War",year:2007,type:"movie",lang:"en",rating:6.8,runtime:102,poster:"https://m.media-amazon.com/images/M/MV5BMTgwMDgwMDc4MF5BMl5BanBnXkFtZTYwOTU3MDM4._V1_SX300.jpg",overview:"A drama based on a Texas congressman Charlie Wilson's covert dealings in Afghanistan where his efforts led to Operation Cyclone.",tags:["drama","comedy","political","cia","true-story"],imdb:"tt0472062",trailer:"https://www.youtube.com/watch?v=eUWXQLIgk8A",director:"Mike Nichols",cast:"Tom Hanks, Julia Roberts, Philip Seymour Hoffman",rt:82},
{id:59,title:"Burn After Reading",year:2008,type:"movie",lang:"en",rating:7.0,runtime:96,poster:"https://m.media-amazon.com/images/M/MV5BMjdmNjJjMzAtMmJkMy00MDJlLTgxYjctNDU3YjBkMmJhM2M5XkEyXkFqcGc@._V1_SX300.jpg",overview:"A disk containing the memoirs of a CIA agent ends up in the hands of two gym employees who attempt to sell it.",tags:["comedy","thriller","cia","dark-comedy"],imdb:"tt0887883",trailer:"https://www.youtube.com/watch?v=jksnxStXol0",director:"Coen Brothers",cast:"Brad Pitt, George Clooney, Frances McDormand",rt:78},
{id:60,title:"Black Book",year:2006,type:"movie",lang:"nl",rating:7.7,runtime:145,poster:"https://m.media-amazon.com/images/M/MV5BMTIzMjc2ODQ2NV5BMl5BanBnXkFtZTYwODkzNTA3._V1_SX300.jpg",overview:"In the occupied Netherlands during World War II, a Jewish singer infiltrates the regional Gestapo headquarters for the Dutch resistance.",tags:["thriller","drama","war","dutch","true-story"],imdb:"tt0389557",trailer:"https://www.youtube.com/watch?v=DIklvGsU7bM",director:"Paul Verhoeven",cast:"Carice van Houten, Sebastian Koch",rt:77},
{id:61,title:"Army of Shadows",year:1969,type:"movie",lang:"fr",rating:8.0,runtime:145,poster:"https://m.media-amazon.com/images/M/MV5BMTQxZGZhOTctM2MyYi00OGZkLTgwOWItNThlNjJkNWEwOWM5XkEyXkFqcGc@._V1_SX300.jpg",overview:"An account of the underground resistance fighters in Nazi-occupied France.",tags:["drama","war","french","classic","resistance"],imdb:"tt0064040",trailer:"https://www.youtube.com/watch?v=sxnCZ0nR2a4",director:"Jean-Pierre Melville",cast:"Lino Ventura, Simone Signoret",rt:97},
{id:62,title:"Eye in the Sky",year:2015,type:"movie",lang:"en",rating:7.3,runtime:102,poster:"https://m.media-amazon.com/images/M/MV5BNTY4Nzg5MTU0OV5BMl5BanBnXkFtZTgwMjY2MjU2NzE@._V1_SX300.jpg",overview:"Col. Katherine Powell leads a drone operation to capture terrorists in Kenya. When a girl enters the kill zone, the Loss of a Loss becomes a Loss of a Loss debate.",tags:["thriller","drama","military","modern"],imdb:"tt2057392",trailer:"https://www.youtube.com/watch?v=jGOdNUGLfRI",director:"Gavin Hood",cast:"Helen Mirren, Aaron Paul, Alan Rickman",rt:95},
{id:63,title:"The Courier",year:2020,type:"movie",lang:"en",rating:7.1,runtime:112,poster:"https://m.media-amazon.com/images/M/MV5BYTJlOTIwNjItYjZiMS00Njc3LThkMDgtNWVhNGUxNzBlYWE3XkEyXkFqcGc@._V1_SX300.jpg",overview:"Cold War spy Greville Wynne and his Russian source Alex Penkovsky provide crucial intelligence to help defuse the Cuban Missile Crisis.",tags:["cold-war","drama","thriller","true-story","british"],imdb:"tt8368512",trailer:"https://www.youtube.com/watch?v=Qeo8qs9xohM",director:"Dominic Cooke",cast:"Benedict Cumberbatch, Merab Ninidze",rt:85},
{id:64,title:"Operation Mincemeat",year:2021,type:"movie",lang:"en",rating:6.6,runtime:128,poster:"https://m.media-amazon.com/images/M/MV5BMzgzMGFiZGQtYjA0OS00NGYxLWIxMDYtOGUxMDc4YjU3ZWQxXkEyXkFqcGc@._V1_SX300.jpg",overview:"British intelligence uses a corpse with fake documents to deceive the Nazis about the Allied invasion of Sicily.",tags:["drama","war","true-story","british","world-war-2"],imdb:"tt1879016",trailer:"https://www.youtube.com/watch?v=zwkSyrN0mvY",director:"John Madden",cast:"Colin Firth, Matthew Macfadyen",rt:83},
{id:65,title:"The Imitation Game",year:2014,type:"movie",lang:"en",rating:8.0,runtime:114,poster:"https://m.media-amazon.com/images/M/MV5BNjI3NjY1Mjg3MV5BMl5BanBnXkFtZTgwMzk5MDQ3MjE@._V1_SX300.jpg",overview:"Alan Turing, a British mathematician, joins the cryptography team to decipher German codes during World War II.",tags:["drama","thriller","true-story","british","world-war-2"],imdb:"tt2084970",trailer:"https://www.youtube.com/watch?v=j2jRs4EAvWM",director:"Morten Tyldum",cast:"Benedict Cumberbatch, Keira Knightley",rt:90},
{id:66,title:"Wrath of Man",year:2021,type:"movie",lang:"en",rating:7.1,runtime:119,poster:"https://m.media-amazon.com/images/M/MV5BODE4ZGY4OTktNDBjMy00NGVkLTk5YWUtNjA3NGU3MTA5NzM0XkEyXkFqcGc@._V1_SX300.jpg",overview:"A cold and mysterious new security guard for a cash truck company surprises his co-workers when he unleashes precision skills during a heist.",tags:["action","thriller","crime"],imdb:"tt11083552",trailer:"https://www.youtube.com/watch?v=wo1kO8m2Nik",director:"Guy Ritchie",cast:"Jason Statham, Holt McCallany",rt:68},
{id:67,title:"No Way Out",year:1987,type:"movie",lang:"en",rating:7.1,runtime:114,poster:"https://m.media-amazon.com/images/M/MV5BN2ZkNGM1MGItYmNiYy00ZTQ0LThiNjUtMjhkYzhiMTM1MTVhXkEyXkFqcGc@._V1_SX300.jpg",overview:"A Navy officer is assigned to investigate a murder, only to find himself entangled in a web of political intrigue and espionage.",tags:["thriller","cold-war","drama","political"],imdb:"tt0093640",trailer:"https://www.youtube.com/watch?v=-NaBMu3pooM",director:"Roger Donaldson",cast:"Kevin Costner, Gene Hackman",rt:92},
{id:68,title:"Confessions of a Dangerous Mind",year:2002,type:"movie",lang:"en",rating:7.0,runtime:113,poster:"https://m.media-amazon.com/images/M/MV5BZjI1NDZhNDgtNjgyNS00YzJjLWJjNzctZjk3ZmZlMWNlYWI2XkEyXkFqcGc@._V1_SX300.jpg",overview:"An adaptation of the autobiography of game show host Chuck Barris, who claimed to be a CIA assassin.",tags:["thriller","comedy","drama","cia","true-story"],imdb:"tt0270288",trailer:"https://www.youtube.com/watch?v=mWyLE7kjGrw",director:"George Clooney",cast:"Sam Rockwell, Drew Barrymore, George Clooney",rt:79},
{id:69,title:"Infernal Affairs",year:2002,type:"movie",lang:"zh",rating:8.0,runtime:101,poster:"https://m.media-amazon.com/images/M/MV5BNWZjNDdiOWUtZDI0Ni00YmY1LTk4MmYtM2Y0YTY3ZTc3OWFiXkEyXkFqcGc@._V1_SX300.jpg",overview:"A cop and a gangster find it hard to keep their undercover identities secret as both sides of the law close in on them.",tags:["thriller","crime","hong-kong","undercover"],imdb:"tt0338564",trailer:"https://www.youtube.com/watch?v=GqdXakBnmsE",director:"Andrew Lau",cast:"Andy Lau, Tony Leung",rt:94},
{id:70,title:"The Man Who Knew Too Much",year:1956,type:"movie",lang:"en",rating:7.4,runtime:120,poster:"https://m.media-amazon.com/images/M/MV5BNDg1NzljZmMtMDU3OS00Y2E5LWE3OGEtMzM4ZjhjMmZmZTI5XkEyXkFqcGc@._V1_SX300.jpg",overview:"A family vacationing in Morocco accidentally stumbles on to an assassination plot and the couple must find their kidnapped son.",tags:["thriller","classic","hitchcock"],imdb:"tt0049470",trailer:"https://www.youtube.com/watch?v=kXXqvoF0iyM",director:"Alfred Hitchcock",cast:"James Stewart, Doris Day",rt:89},
{id:71,title:"Official Secrets",year:2019,type:"movie",lang:"en",rating:7.3,runtime:112,poster:"https://m.media-amazon.com/images/M/MV5BNGM2NzcwZjItOTE4Mi00Yzc5LWI3ZmItYTdkZWQ0NDYxN2YzXkEyXkFqcGc@._V1_SX300.jpg",overview:"The true story of a British intelligence whistle-blower who leaked a secret memo exposing an illegal NSA spy operation.",tags:["thriller","drama","true-story","british","political"],imdb:"tt5431890",trailer:"https://www.youtube.com/watch?v=t64H3S7r4wo",director:"Gavin Hood",cast:"Keira Knightley, Matt Smith",rt:82},
{id:72,title:"Breach",year:2007,type:"movie",lang:"en",rating:7.0,runtime:110,poster:"https://m.media-amazon.com/images/M/MV5BNzNmMmQ3ODYtYjBjMC00ODcxLThmMmQtYTM1NmEyNTBkNTdhXkEyXkFqcGc@._V1_SX300.jpg",overview:"The true story of Robert Hanssen, an FBI agent-turned-spy who was the most damaging mole in Bureau history.",tags:["thriller","drama","true-story","fbi"],imdb:"tt0401997",trailer:"https://www.youtube.com/watch?v=XJuLFKeRoJg",director:"Billy Ray",cast:"Chris Cooper, Ryan Phillippe",rt:83},
{id:73,title:"Telefon",year:1977,type:"movie",lang:"en",rating:6.3,runtime:103,poster:"https://m.media-amazon.com/images/M/MV5BYzc1MDEyNzUtYjUxNy00ZTBiLTg2YmItMjM5ZjRiYTI4ZjJmXkEyXkFqcGc@._V1_SX300.jpg",overview:"A KGB agent is dispatched to America to eliminate Soviet sleeper agents who are being activated by a renegade officer.",tags:["cold-war","thriller","action"],imdb:"tt0076804",trailer:"https://www.youtube.com/watch?v=nji4LO0lUGw",director:"Don Siegel",cast:"Charles Bronson, Lee Remick",rt:44},
{id:74,title:"Patriot Games",year:1992,type:"movie",lang:"en",rating:6.9,runtime:117,poster:"https://m.media-amazon.com/images/M/MV5BZWQ3Y2NiOGEtNjdmMS00ODI1LTk0ODktM2U3NjllNzlmZTkxXkEyXkFqcGc@._V1_SX300.jpg",overview:"When CIA analyst Jack Ryan interferes with an IRA assassination, he becomes the target of a revenge plot.",tags:["action","thriller","cia"],imdb:"tt0105112",trailer:"https://www.youtube.com/watch?v=bq26pM6Om-A",director:"Phillip Noyce",cast:"Harrison Ford, Sean Bean",rt:72},
{id:75,title:"Clear and Present Danger",year:1994,type:"movie",lang:"en",rating:6.9,runtime:141,poster:"https://m.media-amazon.com/images/M/MV5BZmRhZWJhZTctZjE4OS00NzM0LWIyYzEtNTM2MDgyY2MwNTQzXkEyXkFqcGc@._V1_SX300.jpg",overview:"CIA analyst Jack Ryan is drawn into an illegal war against Colombian drug lords funded by the President's inner circle.",tags:["action","thriller","cia","political"],imdb:"tt0109444",trailer:"https://www.youtube.com/watch?v=JjsN_yJJ3vw",director:"Phillip Noyce",cast:"Harrison Ford, Willem Dafoe",rt:81},
{id:76,title:"Thirteen Days",year:2000,type:"movie",lang:"en",rating:7.3,runtime:145,poster:"https://m.media-amazon.com/images/M/MV5BMzBlY2E0MDctZmMwYS00ZThkLTg2ZTEtMDgyZmI5NGIzODk0XkEyXkFqcGc@._V1_SX300.jpg",overview:"A dramatization of the Kennedy administration's response to the Cuban Missile Crisis.",tags:["thriller","drama","cold-war","political","true-story"],imdb:"tt0146309",trailer:"https://www.youtube.com/watch?v=PqM102xIbIs",director:"Roger Donaldson",cast:"Kevin Costner, Bruce Greenwood",rt:83},
{id:77,title:"The Bourne Legacy",year:2012,type:"movie",lang:"en",rating:6.6,runtime:135,poster:"https://m.media-amazon.com/images/M/MV5BMTc4Njk3MDM1Nl5BMl5BanBnXkFtZTcwODgyOTMxOA@@._V1_SX300.jpg",overview:"An expansion of the universe from Robert Ludlum's novels, centred on a new hero whose stakes have been triggered by the events of the previous films.",tags:["action","thriller","bourne"],imdb:"tt1194173",trailer:"https://www.youtube.com/watch?v=43WTCO8-C4w",director:"Tony Gilroy",cast:"Jeremy Renner, Rachel Weisz",rt:56},
{id:78,title:"Spectre",year:2015,type:"movie",lang:"en",rating:6.8,runtime:148,poster:"https://m.media-amazon.com/images/M/MV5BMzA5MzFiNDAtYTI0NC00MDE5LTljYTctYTNkODk1OTZlODI5XkEyXkFqcGc@._V1_SX300.jpg",overview:"A cryptic message from the past sends James Bond on a rogue mission to Mexico City and eventually Rome, where he meets Lucia Sciarra.",tags:["action","bond","thriller"],imdb:"tt2379713",trailer:"https://www.youtube.com/watch?v=z4UDNzXD3qA",director:"Sam Mendes",cast:"Daniel Craig, Christoph Waltz",rt:63},
{id:79,title:"Jack Ryan: Shadow Recruit",year:2014,type:"movie",lang:"en",rating:6.2,runtime:105,poster:"https://m.media-amazon.com/images/M/MV5BMTY2MDkxNzYwNl5BMl5BanBnXkFtZTgwOTM2MjE5MDE@._V1_SX300.jpg",overview:"Jack Ryan, as a young covert CIA analyst, uncovers a Russian plot to crash the U.S. economy.",tags:["action","thriller","cia"],imdb:"tt1205537",trailer:"https://www.youtube.com/watch?v=S8EaxDvZt4w",director:"Kenneth Branagh",cast:"Chris Pine, Kevin Costner",rt:55},
{id:80,title:"Jack Ryan",year:2018,type:"tv",lang:"en",rating:7.8,runtime:50,poster:"https://m.media-amazon.com/images/M/MV5BNGYxNzgzNTQtY2U0OC00NzU2LTgxZmYtNmZkMmVlMjgyMzM3XkEyXkFqcGc@._V1_SX300.jpg",overview:"When CIA analyst Jack Ryan stumbles upon a suspicious series of bank transfers, his search for answers pulls him from the safety of his desk.",tags:["action","thriller","cia","terrorism"],imdb:"tt5057054",trailer:"https://www.youtube.com/watch?v=wjpcQ-6F12Q",director:"Carlton Cuse",cast:"John Krasinski, Wendell Pierce",rt:null},
{id:81,title:"Deutschland 83",year:2015,type:"tv",lang:"de",rating:7.8,runtime:45,poster:"https://m.media-amazon.com/images/M/MV5BMDYwNWY2NTMtOGVkYS00MDFiLWIyN2EtYTg0MGY1ZmQzMjA4XkEyXkFqcGc@._V1_SX300.jpg",overview:"A young East German spy infiltrates the West German army at the height of the Cold War.",tags:["cold-war","thriller","drama","german"],imdb:"tt4445154",trailer:"https://www.youtube.com/watch?v=y3e_k9unJ5c",director:"Anna Winger",cast:"Jonas Nay, Maria Schrader",rt:null},
{id:82,title:"Tinker Tailor Soldier Spy",year:1979,type:"tv",lang:"en",rating:8.4,runtime:55,poster:"https://m.media-amazon.com/images/M/MV5BYTVjMTBmMGEtYjYwMy00YzhkLThmMGMtNDgyMWNmOWRiMzExXkEyXkFqcGc@._V1_SX300.jpg",overview:"The classic BBC adaptation of John le Carr√©'s novel featuring Alec Guinness as George Smiley hunting a Soviet mole in MI6.",tags:["cold-war","thriller","drama","le-carre","british","classic"],imdb:"tt0080297",trailer:"https://www.youtube.com/watch?v=2-5T0boi8PY",director:"John Irvin",cast:"Alec Guinness, Ian Richardson",rt:null},
{id:83,title:"Rubikon",year:1970,type:"tv",lang:"en",rating:7.4,runtime:42,poster:"https://m.media-amazon.com/images/M/MV5BMTk2MzM4NzM0MV5BMl5BanBnXkFtZTcwNDY3MDg1Mw@@._V1_SX300.jpg",overview:"Will Travers discovers mysterious clues after the death of his father's colleague, which leads him into the world of conspiracies and secret intelligence.",tags:["thriller","drama","conspiracy"],imdb:"tt1389371",trailer:"https://www.youtube.com/watch?v=M92_Z2pSuFA",director:"Jason Horwitch",cast:"James Badge Dale, Jessica Collins",rt:null,title:"Rubicon",year:2010},
{id:84,title:"Counterpart",year:2017,type:"tv",lang:"en",rating:8.1,runtime:55,poster:"https://m.media-amazon.com/images/M/MV5BODg5NDU5NjM1NV5BMl5BanBnXkFtZTgwOTE0NjY1NjM@._V1_SX300.jpg",overview:"A UN employee discovers a crossing to a parallel dimension and must navigate the espionage of two worlds.",tags:["thriller","sci-fi","drama","cold-war"],imdb:"tt4643084",trailer:"",director:"Justin Marks",cast:"J.K. Simmons, Olivia Williams",rt:null},
{id:85,title:"Berlin Station",year:2016,type:"tv",lang:"en",rating:7.3,runtime:55,poster:"https://m.media-amazon.com/images/M/MV5BZDlmODM1ZDktNDc3MC00MmRhLWEyOGUtZmU1Y2VjNTdkMTlmXkEyXkFqcGc@._V1_SX300.jpg",overview:"A CIA officer is assigned to the Berlin station to uncover the source of a leak that has led to the exposure of covert operations.",tags:["thriller","drama","cia"],imdb:"tt5191110",trailer:"https://www.youtube.com/watch?v=yEU7dI9IPJc",director:"Olen Steinhauer",cast:"Richard Armitage, Rhys Ifans",rt:null},
{id:86,title:"Tehran",year:2020,type:"tv",lang:"he",rating:7.6,runtime:45,poster:"https://m.media-amazon.com/images/M/MV5BMDA5ZTVjM2EtM2EwMy00NzJiLWI5MjktYWUwYzAwYjE5N2FkXkEyXkFqcGc@._V1_SX300.jpg",overview:"A Mossad agent goes deep undercover on a dangerous mission in Tehran that places her and everyone around her in dire jeopardy.",tags:["thriller","drama","mossad","middle-east"],imdb:"tt10577736",trailer:"https://www.youtube.com/watch?v=Hm_vHTy9IYA",director:"Moshe Zonder",cast:"Niv Sultan, Shaun Toub",rt:null},
{id:87,title:"Condor",year:2018,type:"tv",lang:"en",rating:7.3,runtime:45,poster:"https://m.media-amazon.com/images/M/MV5BZGQ0N2U0NTYtZmNiZC00MTZlLWIyY2MtOTc0OTg4ODgyYjExXkEyXkFqcGc@._V1_SX300.jpg",overview:"A young CIA analyst stumbles onto a plan that could kill millions, inspired by the film Three Days of the Condor.",tags:["thriller","cia","drama","conspiracy"],imdb:"tt6510950",trailer:"https://www.youtube.com/watch?v=454qFDKRiHU",director:"Todd Katzberg",cast:"Max Irons, William Hurt",rt:null},
{id:88,title:"The Old Man",year:2022,type:"tv",lang:"en",rating:7.7,runtime:50,poster:"https://m.media-amazon.com/images/M/MV5BZmMxNjU4YjgtYTNjOS00MzcxLWEyNjMtZmRjNDkxYjNlNGVkXkEyXkFqcGc@._V1_SX300.jpg",overview:"A former CIA officer living off the grid must reconcile his past when an assassin arrives to eliminate him.",tags:["thriller","drama","cia","action"],imdb:"tt5645432",trailer:"https://www.youtube.com/watch?v=-ZgyQgOc72w",director:"Jonathan E. Steinberg",cast:"Jeff Bridges, John Lithgow",rt:null},
{id:89,title:"The Spy",year:2019,type:"tv",lang:"en",rating:7.9,runtime:50,poster:"https://m.media-amazon.com/images/M/MV5BNjQzZDc5YzYtYzdkMy00NmQ0LWI0ODctZjFhMzQ4ZDMyMDA5XkEyXkFqcGc@._V1_SX300.jpg",overview:"The story of Eli Cohen, Israel's most celebrated spy, who infiltrated Syria's political elite in the 1960s.",tags:["thriller","drama","mossad","true-story"],imdb:"tt5952634",trailer:"https://www.youtube.com/watch?v=5UijUOy0MmE",director:"Gideon Raff",cast:"Sacha Baron Cohen, Noah Emmerich",rt:null},
{id:90,title:"Fauda",year:2015,type:"tv",lang:"he",rating:8.2,runtime:45,poster:"https://m.media-amazon.com/images/M/MV5BZDNjNzhmM2ItYWM4Ni00ZThjLWE4N2YtODQ1MzRiYWQ0YzBlXkEyXkFqcGc@._V1_SX300.jpg",overview:"An Israeli Defense Forces commander returns to operational duty to pursue a Hamas militant he thought he'd killed.",tags:["action","thriller","drama","middle-east"],imdb:"tt4565380",trailer:"https://www.youtube.com/watch?v=m5zcu25_IG0",director:"Lior Raz",cast:"Lior Raz, Hisham Suliman",rt:null},
{id:91,title:"The Bureau",year:2020,type:"tv",lang:"en",rating:7.0,runtime:45,poster:"https://m.media-amazon.com/images/M/MV5BZDk2NDA3MzktNTQyOS00YjY0LWI2ZDgtMWI2MTQ5N2Q1Njg0XkEyXkFqcGc@._V1_SX300.jpg",overview:"An undercover CIA intelligence officer navigates the dangerous waters of international espionage.",tags:["thriller","cia","drama"],imdb:"tt4063800",trailer:"https://www.youtube.com/watch?v=DceoS_1QfuM",director:"",cast:"",rt:null},
{id:92,title:"Tenet",year:2020,type:"movie",lang:"en",rating:7.3,runtime:150,poster:"https://m.media-amazon.com/images/M/MV5BNTIzNDIxMzktMzlkMi00MmUyLWFmMjQtZDgwMjBmOGJmNTI3XkEyXkFqcGc@._V1_SX300.jpg",overview:"Armed with only one word, Tenet, and fighting for the survival of the entire world, a protagonist journeys through a twilight world of international espionage.",tags:["action","thriller","sci-fi"],imdb:"tt6723592",trailer:"https://www.youtube.com/watch?v=KJP5RunZUKk",director:"Christopher Nolan",cast:"John David Washington, Robert Pattinson",rt:70},
{id:93,title:"The Recruit",year:2003,type:"movie",lang:"en",rating:6.6,runtime:115,poster:"https://m.media-amazon.com/images/M/MV5BMjE5MDMzOTk3MV5BMl5BanBnXkFtZTYwNTE0NTg2._V1_SX300.jpg",overview:"A brilliant young CIA trainee is asked by his mentor to help find a mole in the Agency.",tags:["thriller","cia","drama"],imdb:"tt0292506",trailer:"https://www.youtube.com/watch?v=TYvVJRtN0vg",director:"Roger Donaldson",cast:"Al Pacino, Colin Farrell",rt:43},
{id:94,title:"Argylle",year:2024,type:"movie",lang:"en",rating:6.0,runtime:139,poster:"https://m.media-amazon.com/images/M/MV5BNDkzMTU2OWUtZjA2ZS00ZmYxLWE2MzgtZDlhZDc1YjM4Yjk5XkEyXkFqcGc@._V1_SX300.jpg",overview:"A reclusive author who writes espionage novels gets caught up in real spy intrigues when the plots of her books get too close to reality.",tags:["action","comedy","thriller"],imdb:"tt15009428",trailer:"https://www.youtube.com/watch?v=Sy6eNs3EW3E",director:"Matthew Vaughn",cast:"Bryce Dallas Howard, Sam Rockwell, Henry Cavill",rt:33},
{id:95,title:"The Gray Man",year:2022,type:"movie",lang:"en",rating:6.5,runtime:122,poster:"https://m.media-amazon.com/images/M/MV5BZmFhZTNlNzctZGQzZi00MTA3LThiNjMtYWQzNjUzMjNjZjA3XkEyXkFqcGc@._V1_SX300.jpg",overview:"When the CIA's most skilled operative accidentally uncovers dark agency secrets, a psychopathic former colleague puts a bounty on his head.",tags:["action","thriller","cia"],imdb:"tt1649418",trailer:"https://www.youtube.com/watch?v=OryyR6ad2rQ",director:"Russo Brothers",cast:"Ryan Gosling, Chris Evans, Ana de Armas",rt:46},
{id:96,title:"Spy Kids",year:2001,type:"movie",lang:"en",rating:5.6,runtime:88,poster:"https://m.media-amazon.com/images/M/MV5BZTQyNDA0ZDctZjFkMC00NDA1LWI3Y2QtOWY5OWE0NTQ2YzJjXkEyXkFqcGc@._V1_SX300.jpg",overview:"The children of secret-agent parents must save them from danger.",tags:["action","comedy","family"],imdb:"tt0227538",trailer:"https://www.youtube.com/watch?v=GE5aHKJp6HI",director:"Robert Rodriguez",cast:"Alexa Vega, Daryl Sabara, Antonio Banderas",rt:92},
{id:97,title:"Spy",year:2015,type:"movie",lang:"en",rating:7.0,runtime:120,poster:"https://m.media-amazon.com/images/M/MV5BNjI5OTQ0MDQxM15BMl5BanBnXkFtZTgwMzcwNjMyNTE@._V1_SX300.jpg",overview:"A desk-bound CIA analyst volunteers to go undercover to infiltrate the world of a deadly arms dealer.",tags:["action","comedy"],imdb:"tt3079380",trailer:"https://www.youtube.com/watch?v=ltijEmlyqlg",director:"Paul Feig",cast:"Melissa McCarthy, Jason Statham, Jude Law",rt:94},
{id:98,title:"Quantum of Solace",year:2008,type:"movie",lang:"en",rating:6.6,runtime:106,poster:"https://m.media-amazon.com/images/M/MV5BYmMwZTA3MTAtNWU0Yy00NGZmLTg0YmItZTVkZGFjZTI1ZWJiXkEyXkFqcGc@._V1_SX300.jpg",overview:"James Bond descends into mystery as he tries to stop a mysterious organisation from eliminating a country's most valuable resource.",tags:["action","bond","thriller"],imdb:"tt0830515",trailer:"https://www.youtube.com/watch?v=BBqYaFEWBxI",director:"Marc Forster",cast:"Daniel Craig, Olga Kurylenko",rt:63},
{id:99,title:"The Recruit",year:2022,type:"tv",lang:"en",rating:7.3,runtime:50,poster:"https://m.media-amazon.com/images/M/MV5BOTgyOGQ3ZTEtMGQ0Ni00YjI1LTgxYjItOTJjMjhiZWE1YWZkXkEyXkFqcGc@._V1_SX300.jpg",overview:"A young CIA lawyer becomes entangled in dangerous international power politics when a former asset threatens to expose agency secrets.",tags:["thriller","drama","cia","action"],imdb:"tt16030542",trailer:"",director:"Alexi Hawley",cast:"Noah Centineo, Laura Haddock",rt:null},
{id:100,title:"Treason",year:2022,type:"tv",lang:"en",rating:6.2,runtime:40,poster:"https://m.media-amazon.com/images/M/MV5BY2Y5ZDE5NjgtYjNhZS00NGYyLThlNTUtZDdjODdkY2U3NTMyXkEyXkFqcGc@._V1_SX300.jpg",overview:"An MI6 deputy whose past catches up with him in the form of a Russian spy forces him to question everything and everyone in his life.",tags:["thriller","drama","british","mi6"],imdb:"tt16450274",trailer:"https://www.youtube.com/watch?v=tnZOg_zCYCI",director:"Matt Charman",cast:"Charlie Cox, Olga Kurylenko",rt:null}
];

// Fix Rubicon data
DATA.find(d=>d.id===83).title="Rubicon";
DATA.find(d=>d.id===83).year=2010;

let seen=JSON.parse(localStorage.getItem('spy-seen')||'{}');
let currentFilters={type:'all',lang:'all',decade:'all',rating:0,seen:'all'};
let searchQuery='';
let sortBy='rating-desc';

const SYNC_API='https://spy-moviestv-api.belk714.workers.dev';
const SYNC_PIN='7714';
let syncTimeout=null;

function setSyncStatus(icon,text){document.getElementById('syncStatus').textContent=icon+' '+text}

function saveSeen(){localStorage.setItem('spy-seen',JSON.stringify(seen))}

function seenToArray(){return Object.keys(seen).filter(k=>seen[k]).map(Number)}
function arrayToSeen(arr){const s={};arr.forEach(id=>{s[id]=true});return s}

function scheduleSync(){
clearTimeout(syncTimeout);
syncTimeout=setTimeout(pushSeen,1000);
}

async function pushSeen(){
setSyncStatus('‚è≥','syncing...');
try{
const res=await fetch(SYNC_API+'/seen?user=default',{
method:'PUT',
headers:{'Content-Type':'application/json','X-Pin':SYNC_PIN},
body:JSON.stringify(seenToArray())
});
if(res.ok){setSyncStatus('‚òÅÔ∏è','synced')}
else{setSyncStatus('‚ö†Ô∏è','sync error')}
}catch(e){setSyncStatus('‚ö†Ô∏è','offline')}
}

async function pullAndMergeSeen(){
setSyncStatus('‚è≥','loading...');
try{
const res=await fetch(SYNC_API+'/seen?user=default');
if(res.ok){
const remote=await res.json();
const remoteSeen=arrayToSeen(remote);
// merge: union of local and remote
let changed=false;
for(const id of Object.keys(remoteSeen)){
if(!seen[id]){seen[id]=true;changed=true}
}
// check if remote is missing local items
const localArr=seenToArray();
const remoteSet=new Set(remote);
const needsPush=localArr.some(id=>!remoteSet.has(id));
saveSeen();
if(changed)render();
if(needsPush||changed){await pushSeen()}
else{setSyncStatus('‚òÅÔ∏è','synced')}
}else{setSyncStatus('‚ö†Ô∏è','sync error')}
}catch(e){setSyncStatus('‚ö†Ô∏è','offline')}
}

function toggleSeen(id,e){
if(e)e.stopPropagation();
seen[id]=!seen[id];
if(!seen[id])delete seen[id];
saveSeen();render();scheduleSync();
}

function updateStats(){
const filtered=getFiltered();
const seenCount=Object.keys(seen).filter(k=>seen[k]).length;
document.getElementById('totalCount').textContent=DATA.length;
document.getElementById('seenCount').textContent=seenCount;
document.getElementById('unseenCount').textContent=DATA.length-seenCount;
const avg=DATA.reduce((s,d)=>s+d.rating,0)/DATA.length;
document.getElementById('avgRating').textContent=avg.toFixed(1);
}

function getFiltered(){
return DATA.filter(d=>{
if(searchQuery){
const q=searchQuery.toLowerCase();
const hay=(d.title+' '+d.overview+' '+(d.cast||'')+' '+(d.director||'')+' '+d.tags.join(' ')).toLowerCase();
if(!hay.includes(q))return false;
}
if(currentFilters.type!=='all'&&d.type!==currentFilters.type)return false;
if(currentFilters.lang==='en'&&d.lang!=='en')return false;
if(currentFilters.lang==='intl'&&d.lang==='en')return false;
if(currentFilters.decade!=='all'){
const dec=parseInt(currentFilters.decade);
if(d.year<dec||d.year>=dec+10)return false;
}
if(d.rating<currentFilters.rating)return false;
if(currentFilters.seen==='seen'&&!seen[d.id])return false;
if(currentFilters.seen==='unseen'&&seen[d.id])return false;
return true;
});
}

function getSorted(items){
const[key,dir]=sortBy.split('-');
const mult=dir==='desc'?-1:1;
return[...items].sort((a,b)=>{
if(key==='rating')return(a.rating-b.rating)*mult;
if(key==='year')return(a.year-b.year)*mult;
if(key==='title')return a.title.localeCompare(b.title)*mult;
return 0;
});
}

function renderCard(d){
const isSeen=seen[d.id];
return`<div class="card ${isSeen?'seen':''}" onclick="openModal(${d.id})">
<div class="card-top">
<img class="poster" src="${d.poster}" alt="${d.title}" loading="lazy" onerror="this.outerHTML='<div class=poster-placeholder>üé¨</div>'">
<div class="card-info">
<div class="card-title">${d.title}</div>
<div class="card-meta">
<span class="badge ${d.type==='movie'?'badge-movie':'badge-tv'}">${d.type==='movie'?'üé¨ Movie':'üì∫ TV'}</span>
<span>${d.year}</span>
<span class="rating">‚≠ê ${d.rating}</span>
${d.rt!=null?`<span class="rating" style="color:#fa3e35">üçÖ ${d.rt}%</span>`:''}
${d.runtime?`<span>${d.runtime}m</span>`:''}
<span>${d.lang.toUpperCase()}</span>
</div>
<p class="card-overview">${d.overview}</p>
</div>
</div>
<div class="card-bottom">
<div class="tags">${d.tags.map(t=>`<span class="tag">${t}</span>`).join('')}</div>
<div class="card-actions">
<button class="btn-seen" onclick="toggleSeen(${d.id},event)">${isSeen?'‚úÖ Seen':'üëÅÔ∏è Mark Seen'}</button>
</div>
</div>
</div>`;
}

function render(){
const filtered=getSorted(getFiltered());
const grid=document.getElementById('grid');
if(filtered.length===0){
grid.innerHTML='<div class="no-results">üîç No titles match your filters. Try adjusting your search.</div>';
}else{
grid.innerHTML=filtered.map(renderCard).join('');
}
updateStats();
}

function openModal(id){
const d=DATA.find(x=>x.id===id);
if(!d)return;
document.getElementById('modalPoster').src=d.poster;
document.getElementById('modalTitle').textContent=d.title;
document.getElementById('modalMeta').innerHTML=`
<span class="badge ${d.type==='movie'?'badge-movie':'badge-tv'}">${d.type==='movie'?'üé¨ Movie':'üì∫ TV'}</span>
<span>${d.year}</span>
<span class="rating">‚≠ê ${d.rating}</span>
${d.rt!=null?`<span class="rating" style="color:#fa3e35">üçÖ ${d.rt}%</span>`:''}
${d.runtime?`<span>${d.runtime} min</span>`:''}
<span>${d.lang.toUpperCase()}</span>
${d.director?`<span>üé¨ ${d.director}</span>`:''}
`;
document.getElementById('modalOverview').textContent=d.overview;
document.getElementById('modalTags').innerHTML=d.tags.map(t=>`<span class="tag">${t}</span>`).join('');
let actions=`<button class="btn-seen" onclick="toggleSeen(${d.id}); openModal(${d.id})">${seen[d.id]?'‚úÖ Seen':'üëÅÔ∏è Mark Seen'}</button>`;
if(d.imdb)actions+=`<a class="btn-link" href="https://www.imdb.com/title/${d.imdb}" target="_blank">IMDb ‚Üó</a>`;
if(d.trailer)actions+=`<a class="btn-link" href="${d.trailer}" target="_blank">‚ñ∂ Trailer</a>`;
if(d.cast)actions+=`<span style="font-size:.8rem;color:var(--text-dim);margin-top:4px;display:block;width:100%">üé≠ ${d.cast}</span>`;
document.getElementById('modalActions').innerHTML=actions;
document.getElementById('modal').classList.add('open');
}

function closeModal(){document.getElementById('modal').classList.remove('open')}

// Event listeners
document.getElementById('search').addEventListener('input',e=>{searchQuery=e.target.value;render()});
document.getElementById('sortBy').addEventListener('change',e=>{sortBy=e.target.value;render()});
document.getElementById('modal').addEventListener('click',e=>{if(e.target.id==='modal')closeModal()});
document.addEventListener('keydown',e=>{if(e.key==='Escape')closeModal()});

function setupFilterGroup(groupId,filterKey){
document.getElementById(groupId).addEventListener('click',e=>{
const btn=e.target.closest('.fbtn');
if(!btn)return;
document.querySelectorAll(`#${groupId} .fbtn`).forEach(b=>b.classList.remove('active','active-alt','active-green'));
btn.classList.add('active');
currentFilters[filterKey]=btn.dataset.val==='0'?0:isNaN(btn.dataset.val)?btn.dataset.val:parseFloat(btn.dataset.val);
render();
});
}

setupFilterGroup('typeFilter','type');
setupFilterGroup('langFilter','lang');
setupFilterGroup('ratingFilter','rating');
setupFilterGroup('seenFilter','seen');

// Decade dropdown
document.getElementById('decadeFilter').addEventListener('change',e=>{
currentFilters.decade=e.target.value;
render();
});

// === STREAMING PROVIDERS ===
const TMDB_KEY='d56e51fb77b081a9cb5192eaaa7823ad';
const TMDB_IMG='https://image.tmdb.org/t/p/original';
const providerCache={};
const tmdbIdCache={};
const STREAM_PLATFORMS=[
{id:8,name:'Netflix',logo:'/t2yyOv40HZeVlLjYsCsPHnWLk4W.jpg'},
{id:350,name:'Apple TV+',logo:'/6uhKBfmtzFqOcLousHwZuzcrScK.jpg'},
{id:9,name:'Amazon Prime Video',logo:'/emthp39XA2YScoYL1p0sdbAH2WA.jpg'},
{id:15,name:'Hulu',logo:'/zxrVdFjIjLqkfnwyghnfywTn3Lh.jpg'},
{id:1899,name:'Max',logo:'/6Q3YKUNA3GapSRAibEjOEbiFLCn.jpg'},
{id:531,name:'Paramount+',logo:'/xbhHHa1YVI24G44uUQg1EjSXR8l.jpg'},
{id:386,name:'Peacock',logo:'/8VCV78prwd9QzZnEGQ9rTvwMlRa.jpg'},
{id:337,name:'Disney+',logo:'/7rwgEs15tFwyR9NPQ5vpzxTj19Q.jpg'}
];
let activeStreamFilters=new Set();

// Build streaming dropdown
const streamDD=document.getElementById('streamDropdown');
streamDD.innerHTML=STREAM_PLATFORMS.map(p=>`<div class="stream-opt" data-pid="${p.id}"><span class="check">‚úì</span><img src="${TMDB_IMG}${p.logo}" alt="${p.name}">${p.name}</div>`).join('');

document.getElementById('streamToggle').addEventListener('click',e=>{
e.stopPropagation();
streamDD.classList.toggle('open');
});
document.addEventListener('click',()=>streamDD.classList.remove('open'));
streamDD.addEventListener('click',e=>{
e.stopPropagation();
const opt=e.target.closest('.stream-opt');
if(!opt)return;
const pid=parseInt(opt.dataset.pid);
if(activeStreamFilters.has(pid)){activeStreamFilters.delete(pid);opt.classList.remove('checked')}
else{activeStreamFilters.add(pid);opt.classList.add('checked')}
const toggle=document.getElementById('streamToggle');
if(activeStreamFilters.size>0){
toggle.classList.add('has-active');
toggle.textContent='üì∫ '+activeStreamFilters.size+' Platform'+(activeStreamFilters.size>1?'s':'')+' ‚ñæ';
}else{
toggle.classList.remove('has-active');
toggle.textContent='üì∫ Any Platform ‚ñæ';
}
render();
});

// Restore from sessionStorage
try{
const cached=JSON.parse(sessionStorage.getItem('spy-providers')||'{}');
Object.assign(providerCache,cached);
const cachedIds=JSON.parse(sessionStorage.getItem('spy-tmdb-ids')||'{}');
Object.assign(tmdbIdCache,cachedIds);
}catch(e){}

function saveProviderCache(){
try{sessionStorage.setItem('spy-providers',JSON.stringify(providerCache));
sessionStorage.setItem('spy-tmdb-ids',JSON.stringify(tmdbIdCache));}catch(e){}
}

async function getTmdbId(item){
if(tmdbIdCache[item.imdb])return tmdbIdCache[item.imdb];
try{
const res=await fetch(`https://api.themoviedb.org/3/find/${item.imdb}?api_key=${TMDB_KEY}&external_source=imdb_id`);
const data=await res.json();
const results=data.movie_results||data.tv_results||[];
if(results.length>0){
tmdbIdCache[item.imdb]={id:results[0].id,type:data.movie_results&&data.movie_results.length>0?'movie':'tv'};
}else if(data.tv_results&&data.tv_results.length>0){
tmdbIdCache[item.imdb]={id:data.tv_results[0].id,type:'tv'};
}
saveProviderCache();
return tmdbIdCache[item.imdb];
}catch(e){return null}
}

async function fetchProviders(item){
if(providerCache[item.id])return providerCache[item.id];
const tmdb=await getTmdbId(item);
if(!tmdb)return null;
try{
const endpoint=tmdb.type==='tv'?'tv':'movie';
const res=await fetch(`https://api.themoviedb.org/3/${endpoint}/${tmdb.id}/watch/providers?api_key=${TMDB_KEY}`);
const data=await res.json();
const us=data.results&&data.results.US;
providerCache[item.id]={
flatrate:(us&&us.flatrate)||[],
rent:(us&&us.rent)||[],
buy:(us&&us.buy)||[],
link:(us&&us.link)||null
};
saveProviderCache();
return providerCache[item.id];
}catch(e){return null}
}

function renderProviders(itemId){
const prov=providerCache[itemId];
if(!prov)return'<div class="providers loading">Loading streaming...</div>';
if(prov.flatrate.length===0&&prov.rent.length===0&&prov.buy.length===0){
return'<div class="providers"><span style="font-size:.68rem;color:var(--text-dim)">No streaming info</span></div>';
}
let html='<div class="providers">';
if(prov.flatrate.length>0){
prov.flatrate.slice(0,5).forEach(p=>{
html+=`<img class="prov-logo" src="${TMDB_IMG}${p.logo_path}" alt="${p.provider_name}" title="${p.provider_name}">`;
});
}else if(prov.rent.length>0){
html+='<span class="prov-rent">Rent';
prov.rent.slice(0,3).forEach(p=>{
html+=`<img class="prov-logo" src="${TMDB_IMG}${p.logo_path}" alt="${p.provider_name}" title="${p.provider_name}">`;
});
html+='</span>';
}
if(prov.link)html+=`<a class="prov-link" href="${prov.link}" target="_blank">JustWatch ‚Üó</a>`;
html+='</div>';
return html;
}

function renderModalProviders(itemId){
const prov=providerCache[itemId];
if(!prov)return'<div class="modal-providers"><span style="font-size:.8rem;color:var(--text-dim)">Loading streaming info...</span></div>';
let html='';
if(prov.flatrate.length>0){
html+='<div class="modal-providers"><span class="modal-prov-label">üì∫ Stream on:</span>';
prov.flatrate.forEach(p=>{
html+=`<img class="prov-logo" src="${TMDB_IMG}${p.logo_path}" alt="${p.provider_name}" title="${p.provider_name}">`;
});
html+='</div>';
}
if(prov.rent.length>0){
html+='<div class="modal-providers"><span class="modal-prov-label">üí≤ Rent from:</span>';
prov.rent.forEach(p=>{
html+=`<img class="prov-logo" src="${TMDB_IMG}${p.logo_path}" alt="${p.provider_name}" title="${p.provider_name}">`;
});
html+='</div>';
}
if(prov.buy.length>0){
html+='<div class="modal-providers"><span class="modal-prov-label">üõí Buy from:</span>';
prov.buy.forEach(p=>{
html+=`<img class="prov-logo" src="${TMDB_IMG}${p.logo_path}" alt="${p.provider_name}" title="${p.provider_name}">`;
});
html+='</div>';
}
if(prov.link)html+=`<a class="prov-link" href="${prov.link}" target="_blank" style="font-size:.8rem">View on JustWatch ‚Üó</a>`;
if(!prov.flatrate.length&&!prov.rent.length&&!prov.buy.length){
html='<div class="modal-providers"><span style="font-size:.8rem;color:var(--text-dim)">No streaming info available</span></div>';
}
return html;
}

// Lazy load providers with IntersectionObserver
let providerObserver;
function setupProviderObserver(){
if(providerObserver)providerObserver.disconnect();
providerObserver=new IntersectionObserver((entries)=>{
entries.forEach(entry=>{
if(entry.isIntersecting){
const card=entry.target;
const itemId=parseInt(card.dataset.itemId);
if(itemId&&!providerCache[itemId]){
const item=DATA.find(d=>d.id===itemId);
if(item)fetchProviders(item).then(()=>{
const provEl=card.querySelector('.providers');
if(provEl)provEl.outerHTML=renderProviders(itemId);
});
}else if(providerCache[itemId]){
const provEl=card.querySelector('.providers');
if(provEl&&provEl.classList.contains('loading'))provEl.outerHTML=renderProviders(itemId);
}
providerObserver.unobserve(card);
}
});
},{rootMargin:'200px'});
document.querySelectorAll('.card[data-item-id]').forEach(card=>providerObserver.observe(card));
}

// Override getFiltered to include streaming filter
const _origGetFiltered=getFiltered;
const getFilteredWithStreaming=function(){
let items=_origGetFiltered();
if(activeStreamFilters.size>0){
items=items.filter(d=>{
const prov=providerCache[d.id];
if(!prov)return false; // not loaded yet - hide until loaded
return prov.flatrate.some(p=>activeStreamFilters.has(p.provider_id));
});
}
return items;
};
// Monkey-patch
window.getFiltered=getFilteredWithStreaming;

// Prefetch providers for visible items when streaming filter is active
async function prefetchAllProviders(){
for(let i=0;i<DATA.length;i++){
if(!providerCache[DATA[i].id]){
await fetchProviders(DATA[i]);
await new Promise(r=>setTimeout(r,100)); // rate limit
}
}
render();
}

// Override renderCard to include providers
const _origRenderCard=renderCard;
window.renderCard=function(d){
const isSeen=seen[d.id];
return`<div class="card ${isSeen?'seen':''}" data-item-id="${d.id}" onclick="openModal(${d.id})">
<div class="card-top">
<img class="poster" src="${d.poster}" alt="${d.title}" loading="lazy" onerror="this.outerHTML='<div class=poster-placeholder>üé¨</div>'">
<div class="card-info">
<div class="card-title">${d.title}</div>
<div class="card-meta">
<span class="badge ${d.type==='movie'?'badge-movie':'badge-tv'}">${d.type==='movie'?'üé¨ Movie':'üì∫ TV'}</span>
<span>${d.year}</span>
<span class="rating">‚≠ê ${d.rating}</span>
${d.rt!=null?`<span class="rating" style="color:#fa3e35">üçÖ ${d.rt}%</span>`:''}
${d.runtime?`<span>${d.runtime}m</span>`:''}
<span>${d.lang.toUpperCase()}</span>
</div>
<p class="card-overview">${d.overview}</p>
</div>
</div>
${renderProviders(d.id)}
<div class="card-bottom">
<div class="tags">${d.tags.map(t=>`<span class="tag">${t}</span>`).join('')}</div>
<div class="card-actions">
<button class="btn-seen" onclick="toggleSeen(${d.id},event)">${isSeen?'‚úÖ Seen':'üëÅÔ∏è Mark Seen'}</button>
</div>
</div>
</div>`;
};

// Override openModal to include providers
const _origOpenModal=openModal;
window.openModal=function(id){
_origOpenModal(id);
const d=DATA.find(x=>x.id===id);
if(!d)return;
// Add providers to modal
const actionsEl=document.getElementById('modalActions');
let provHtml=renderModalProviders(id);
const existingProv=document.getElementById('modalProviders');
if(existingProv)existingProv.outerHTML=`<div id="modalProviders">${provHtml}</div>`;
else actionsEl.insertAdjacentHTML('beforebegin',`<div id="modalProviders">${provHtml}</div>`);
// Fetch if not cached
if(!providerCache[id]){
fetchProviders(d).then(()=>{
const mp=document.getElementById('modalProviders');
if(mp)mp.innerHTML=renderModalProviders(id);
});
}
};

// Override render to setup observer after
const _origRender=render;
window.render=function(){
const filtered=getSorted(window.getFiltered());
const grid=document.getElementById('grid');
if(filtered.length===0){
grid.innerHTML='<div class="no-results">üîç No titles match your filters. Try adjusting your search.</div>';
}else{
grid.innerHTML=filtered.map(window.renderCard).join('');
}
updateStats();
setTimeout(setupProviderObserver,50);
};

// When streaming filter is activated, prefetch all
const _origStreamClick=streamDD.onclick;
streamDD.addEventListener('click',()=>{
if(activeStreamFilters.size>0){
const needsFetch=DATA.some(d=>!providerCache[d.id]);
if(needsFetch)prefetchAllProviders();
}
});

render();
pullAndMergeSeen();
</script>
</body>
</html>
